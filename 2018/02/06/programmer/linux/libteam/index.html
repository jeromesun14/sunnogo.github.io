<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>linux 聚合口 team &amp; libteam 简介 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="linux 聚合口 team &amp; libteam 简介">
<meta name="keywords" content="Linux,libteam,teamd,teamdctl,bonding,port channel,port group,lag,lacp">
<meta property="og:type" content="article">
<meta property="og:title" content="linux 聚合口 team &amp; libteam 简介">
<meta property="og:url" content="http://yoursite.com/2018/02/06/programmer/linux/libteam/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="linux 聚合口 team &amp; libteam 简介">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/images/linux/libteam.png">
<meta property="og:updated_time" content="2019-04-17T09:58:07.080Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="linux 聚合口 team &amp; libteam 简介">
<meta name="twitter:description" content="linux 聚合口 team &amp; libteam 简介">
<meta name="twitter:image" content="http://yoursite.com/images/linux/libteam.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-programmer/linux/libteam" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/02/06/programmer/linux/libteam/" class="article-date">
  <time datetime="2018-02-06T06:19:24.000Z" itemprop="datePublished">2018-02-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      linux 聚合口 team &amp; libteam 简介
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>详见：</p>
<ul>
<li>libteam 项目 <a href="https://github.com/jpirko/libteam/wiki" target="_blank" rel="noopener">wiki</a></li>
<li>libteam <a href="http://www.libteam.org/files/teamdev.pp.pdf" target="_blank" rel="noopener">ppt</a></li>
</ul>
<h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><p>目标：替代 bonding 功能，最终干掉 bonding。</p>
<ul>
<li>内核中的代码尽可能少。把内核当成是 puppet</li>
<li>控制逻辑在用户空间实现，puppeteer</li>
</ul>
<p><img src="/images/linux/libteam.png" alt="libteam架构"></p>
<p>整个项目称为 team project，其中用户空间的代码项目为 libteam，含 libteam 库、teamd daemon、teamd-utils 三个组件。</p>
<h3 id="teamdev-driver"><a href="#teamdev-driver" class="headerlink" title="teamdev driver"></a>teamdev driver</h3><p>从 Linux 内核版本 3.3 开始支持。teamdev driver 遵循以下原则，只做报文的 rx/tx 处理，本身无业务逻辑。</p>
<blockquote>
<p>If something can be done in userspace, do it in userspace.</p>
</blockquote>
<ul>
<li>fast-path （1.4KLOC）</li>
<li>netlink 通信（0.6KLOC）<ul>
<li>user space 配置、改变 teamdev 驱动的行为</li>
<li>user space 从驱动获取端口状态变化等事件</li>
</ul>
</li>
<li>Team 模式<ul>
<li>一种 mode 一个内核模块</li>
<li>activebackup</li>
<li>broadcast</li>
<li>loadbalance</li>
<li>random</li>
<li>roundrobin</li>
</ul>
</li>
</ul>
<p>一般称为 teamdev，接口名为 team0 等。</p>
<h3 id="libteam-lib"><a href="#libteam-lib" class="headerlink" title="libteam lib"></a>libteam lib</h3><p>使用 libnl，封装 Team Netlink 通信。用户无需知道任何  Netlink API 相关的信息。<br>所有消息都来自 driver，并缓存在用户空间，使用者不需要发任何消息就能获取到请求的数据。</p>
<p>同时封装 RT Netlink，用于使用者添加、删除 Teamdev 实例，或添加删除 port，或获取、设置网络接口的硬件 IP 等。</p>
<h3 id="libteam-teamd"><a href="#libteam-teamd" class="headerlink" title="libteam teamd"></a>libteam teamd</h3><p>即 Team daemon，为 libteam 项目的一部分，使用 libteam lib。teamd 跑在后台，一个实例对应一个 Team softdev，用于支持多种多样的逻辑 Team 行为。比如 基础的 round-robin，或更复杂的 active-backup、load-balancing。这些逻辑在 teamd 中称为 runner，每个 Team softdev 只能运行一种 runner。</p>
<h3 id="Team-Netlink"><a href="#Team-Netlink" class="headerlink" title="Team Netlink"></a>Team Netlink</h3><p>有两种类型的消息：Port list 和 option list。</p>
<p>Port list 消息只存在 driver -&gt; lib 方向，只读数据。schema：</p>
<ul>
<li>port item<ul>
<li>interface index</li>
<li>changed flag，指明该端口任何状态是否有变化。</li>
<li>removed flag，指明端口被删除了</li>
<li>linkup，直接从 ethtool 获取 link 状态</li>
<li>speed，直接从 ethtool 获取  Mbps</li>
<li>duplex，直接从 ethtool 获取 duplex</li>
</ul>
</li>
<li>port item<ul>
<li>…</li>
</ul>
</li>
<li>port item<ul>
<li>…</li>
</ul>
</li>
</ul>
<p>Option list 消息可能存在两个方向。driver -&gt; lib 方向，暴露并传输 driver 数据到  userspace。 lib-&gt; driver 方向，用于通告 driver 哪个 option 的值应变化，应怎么变化。schema 如下：</p>
<ul>
<li>option item<ul>
<li>name，option 名</li>
<li>changed flag</li>
<li>removed flag</li>
<li>type，指明以面 data 域的类型</li>
<li>data，动态类型</li>
<li>port interface index。如果 option 是 per-port 的，那么这个值为对应接口 index。</li>
<li>array index，如果 option 是 array。</li>
</ul>
</li>
<li>option item<ul>
<li>…</li>
</ul>
</li>
<li>option item<ul>
<li>…</li>
</ul>
</li>
</ul>
<p>存在以下消息：</p>
<ol>
<li>lib 请求 port list</li>
<li>lib 请求 option list</li>
<li>lib 请求 option 值变化</li>
<li>driver port 状态变化事件。net core 通知 dirver 哪些端口状态变化或被删除。</li>
<li>driver option 值变化事件。</li>
</ol>
<p>第4、5点，使用 netlink multicast facility，用于支撑多用户空间实例。</p>
<ul>
<li>teamnl，使用 libteam，并封装 Team device Netlink 通信。</li>
</ul>
<h2 id="Driver"><a href="#Driver" class="headerlink" title="Driver"></a>Driver</h2><p>通过 ip 工具集即可添加、删除 team 设备。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ip link add name team0 type team</span><br><span class="line"># ip link delete team0</span><br></pre></td></tr></table></figure>
<p>创建 team 设备时，如果未指定硬件地址，将生成一个随机的。</p>
<p>同样通过 ip 工具集添加、移除端口。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ip link set eth0 master team0</span><br><span class="line"># ip link set eth0 nomaster</span><br></pre></td></tr></table></figure>
<p>Team softdev 驱动使用 netdevice 通告机制获取 port 上面的事件，比如 link 状态变化、port 丢失等。当一个 team 设备实例创建时（例如 team0），它就与其他网络设备无异，用户可像普通网络设备那样配置 team0，比如配置 IP 地址、应用 iptables 规则等。不同的地方是它自己不能从收发 skb，它使用其他网络设备（物理端口）。</p>
<p>发送 skb 时，team softdev 通过 port 选择算法选出一个 port，然后使用该 port 的 netdevice 发送 skb。</p>
<p>接收端，team softdev 使用 net core rx 步骤的 rx_handle 钩子拦截报文。bonding、bridging、macvlan 和 openvswitch 使用同样的钩子。通过这个钩子，报文看起来就像是从 teamdev 中接收的。然后 Net 核心代码就将报文视为从 teamdev 中接收的，进行下一步处理。</p>
<p>问题的重点在于如何达到最好的性能，因此 fast path（skb 发送、接收 paths）都是无锁的，只使用 RCU。同时将数据存到内存中，实现最大的局部性和最小的指针解引用。</p>
<h3 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h3><p>【TBD】</p>
<h3 id="Modes"><a href="#Modes" class="headerlink" title="Modes"></a>Modes</h3><p>每个 mode 实现成一个 module。Team core 代码使用用户空间应用配置的 mode 字符串，调用对应 mode 实现的 handler。这些 handler 定义以下行为：</p>
<ul>
<li><em>init</em>，在选择模式后调用，与通常的 init 函数一样，用于分配内存和注册 mode 特有的 option。</li>
<li><em>exit</em>，反选 mode 后调用。</li>
<li><em>receive</em>，由接收钩子调用，这个 handler 允许 mode 查看收到的 skb，并可修改 skb。</li>
<li><em>transmit</em>，由 Team core 发送函数调用。在这里决策发送端口。</li>
<li><em>port_enter</em>，当一个端口加入 teamdev 时调用</li>
<li><em>port_leave</em>，当一个端口移除时调用</li>
<li><em>port_change_mac</em>，当检测到硬件地址发生变化时调用。</li>
</ul>
<p>目前实现五种模式：</p>
<ol>
<li><em>broadcast</em>，Basic mode。将报文发送给所有可能的端口。</li>
<li><em>roundrobin</em>，Basic mode。一种很简单的端口选择算法，基于端口列表，逐个循环选择端口。这是唯一一种可以不需要用户空间交互就可正常 运行的模式。</li>
<li><em>random</em>，Basic mode。随机选择端口。</li>
<li><em>activebackup</em>，在这种模式，只有一个端口处于 active 状态，该端口处理 skb 收发。其他端口都处于 backup 状态。用户空间通过 activeport 选项指定 active 端口。</li>
<li><em>loadbalance</em>，一个复杂的模式。比如用于 LACP 和用户空间控制收发均衡。使用 hash 识别相同的 skb。Hash 长度 8 比特，所以总共有 256 种类型的 skb。hash 使用 BPF (Berkeley Packet Filter) 机制计算。这个模式使用以下选项：</li>
</ol>
<ul>
<li><em>bpf_hash_func</em>，一个二进制 option，包含 BPF 函数，用于从 skb 计算 hash 值。应用空间可组合和配置 hash 计算函数。例如源、目的 IP 地址、MAC 地址等。</li>
<li><em>lb_hash_stats</em> 和 <em>lb_port_stats</em>，只读数组选项。暴露 256 种可能的 skb 类型的收发计算器，以及每个端口的收发计算器。用户空间程序可使用这个统计值判断端口的均衡程序，如果均衡程度不够，再进行 hash 算法调整。</li>
<li><em>lb_stats_refresh_interval</em>，下发统计值到用户空间的频率。</li>
<li><em>lb_tx_hash_to_port_mapping</em>，用于 hash-to-port 映射的数组选项。允许用户空间应用程序告诉驱动程序某个特定 hash 值的 skb 应选择哪个端口发送。</li>
<li><em>lb_tx_method</em>，字符串选择，有两个值。<ul>
<li><em>hash</em>，告诉驱动使用 hash 值获取发送端口</li>
<li><em>hash_to_port_mapping</em>，使能 hash_to_port_mapping 功能，并从先前的数组选项获取发送端口。</li>
</ul>
</li>
</ul>
<h2 id="teamd"><a href="#teamd" class="headerlink" title="teamd"></a>teamd</h2><p>libteam 项目的重要部分。如果可能，最好在 teamd 实现功能，而非 Team softdev Linux 驱动。把 teamdev 视为木偶，则 teamd 是操纵 teamdev 的傀儡师。</p>
<p>teamd 的详细命令行参数见 <em>man 8 teamd</em>。</p>
<p>teamd 负责 teamdev 的创建与删除。teamdev 在 teamd 启动的时候创建，在 teamd 退出前删除。teamdev 的名字（比如 team0）通过配置文件指定。</p>
<p>Teamd 主要负责：</p>
<ul>
<li>配置文件解析</li>
<li>后台 forking 以及诸如 PID 创建、信号处理等相关的事情。在运行 systemd 的系统中不需要，但是  teamd 也需要运行在其他系统。</li>
<li>Team softdev Linux driver 实例的创建与删除。</li>
<li>Libteam 库通信初始化</li>
<li>提供主循环框架，用于 fd 或定时器等的监控与处理。</li>
<li>初始化事件机</li>
<li>端口添加、删除事件处理</li>
<li>初始化链路状态监控器（watcher）</li>
<li>初始化 runner</li>
<li>初始化 D-Bus 接口</li>
<li>添加端口到 teamdev</li>
</ul>
<p>teamd 被设计成单进程、单线程应用，目前不需要多线程，这样代码会更简单。所有的运行时工作都在主循环中完成。所以如果 runner 或 watcher 需要做自己的事情（比如定时工作或 socker 数据接收等），则它们必须在主循环的框架中自己实现。</p>
<h3 id="link-watcher"><a href="#link-watcher" class="headerlink" title="link-watcher"></a>link-watcher</h3><p>Link 监测器实现链路状态检测，可使用不同的方法检测某个端口是否有报文传输能力，即判断端口是否 Up。</p>
<p>目前实现的方式有：</p>
<ul>
<li><em>ethtool</em>，使用 libteam lib 获取端口 ethtool 状态变化</li>
<li><em>arp_ping</em>，通过某端口发送 ARP 请求，如果有收到 ARP 请求，则认为链路为 up 状态。目标 IP 地址、发送时间间隔和其他选项都可以在 teamd 中配置。</li>
<li><em>nsna_ping</em>，类似 arp_ping，但是使用 IPv6 邻居请求（NS，neighbor solicitation）和邻居发现机制（NA，neighbor advertisement）。用于纯 IPv6 环境。</li>
</ul>
<p>可全局配置，亦可每端口配置 link-watch。用户也可以为一次配置多个 link-watcher，只有当所有的 link-watcher 报告的状态都为 up，链路才是 up。</p>
<h3 id="runner"><a href="#runner" class="headerlink" title="runner"></a>runner</h3><p>Runner 决定 Team 设备的行为。他们使用想要的内核 team 模式进行操作。Runner 监测端口 link 状态变化（使用所选择的 link-watch 监测结果），并进行相应的操作。Runner 可能还实现其他功能。</p>
<p>有以下 Runners 可使用（Team softdev Linux 驱动模式见以下括号）：</p>
<ul>
<li><em>broadcast</em> (<em>broadcast</em>)，几乎没做啥，只是将 teamdev 的模式置为 broadcast 模式。</li>
<li><em>roundrobin</em> (<em>roundrobin</em>)，几乎没做啥，只是将 teamdev 的模式置为 roundrobin 模式。</li>
<li><em>random</em> (<em>random</em>)，几乎没做啥，只是将 teamdev 的模式置为 random 模式。</li>
<li><em>activebackup</em> (<em>broadcast</em>)，监测链路变化，并选择 active 端口做报文传输。每个端口可配置自己的优先级，以及是否 sticky。sticky 的含义为即使有更高优先级的端口 Link，该端口也不会被停用。</li>
<li><em>loadbalance</em> (<em>loadbalance</em>)，为了做被动的负载平衡，runner 只设置 BPF 散列函数，它将确定 skb 传输的端口。为了执行主动负载平衡，runner 将不同哈希值映射到不同的以达到完美平衡。<em>lb_hash_stats</em> 数组选项用于获取统计信息。<em>lb_tx_hash_to_port_mapping</em> 数组选项用于将散列映射到 TX 端口。</li>
<li><em>lacp</em> (<em>loadbalance</em>)，实现 802.3ad LACP 协议。可使用 <em>hash</em> 或 <em>loadbalance</em> runner。</li>
</ul>
<h3 id="teamd-control-API"><a href="#teamd-control-API" class="headerlink" title="teamd control API"></a>teamd control API</h3><p>Teamd 提供 control API 供用户控制。通过 D-Bus 和 Unix socket 实现。</p>
<p>teamd 启动时默认使用 Unix domain socket API，如果有带  <code>-D</code> 选项，则使用 D-Bus API，创建 D-Bus 服务 <em>org.libteam.teamd.[teamdevname]</em>。</p>
<p>支持以下方法：</p>
<ul>
<li><em>ConfigDump()</em>，返回 teamd 所有 JSON 配置。</li>
<li><em>ConfigDumpActual()</em>，返回所有 teamd JSON 配置，但是只包含在线端口的配置，过滤所有非在线端口。</li>
<li><em>StateDump()</em>，返回 teamd 的状态以及其 JSON 中的子配置。</li>
<li><em>PortAdd(String port_devname)</em>，添加端口到 teamdev。</li>
<li><em>PortRemove</em></li>
<li><em>PortConfigUpdate</em></li>
<li><em>PortConfigDump</em></li>
<li><em>StateItemValueGet(String state_item_path)</em>，在 state 树中查找 state 条目，并返回其值。</li>
<li><em>StateItemValueSet(String state_item_path, String value)</em></li>
</ul>
<p>有计划在将来用更多的方法扩展这个接口。<br>还有一个想法是扩展 API，以便能够将一个 runner 作为一个外部应用程序通过 control API 与 teamd 通信。</p>
<h3 id="teamdctl"><a href="#teamdctl" class="headerlink" title="teamdctl"></a>teamdctl</h3><p><em>teamdctl</em> 提供 control API 的封装，用来运行时监控和配置 teamd。1:1 封装 API。</p>
<p><em>teamdctl</em> 命令更详细的描述和命令行参数，详见 manpage （<em>man 8 teamdctl</em>）。</p>
<h4 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h4><p><em>teamd</em> 使用 JSON 配置文件配置，通过命令行或 .JSON 格式的的文件传递给 <em>teamd</em>。<br>选择 JSON 格式的原因是它可以轻松指定（和解析）分层配置。</p>
<p><em>teamd</em> 配置样例（<em>teamd1.conf</em>）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        &quot;device&quot;:      &quot;team0&quot;,</span><br><span class="line">        &quot;hwaddr&quot;:      &quot;10:22:33:44:55:66&quot;,</span><br><span class="line">        &quot;runner&quot;:      &#123;&quot;name&quot;: &quot;activebackup&quot;&#125;,</span><br><span class="line">        &quot;link_watch&quot;:  &#123;</span><br><span class="line">                &quot;name&quot;: &quot;nsna_ping&quot;,</span><br><span class="line">                &quot;interval&quot;: 200,</span><br><span class="line">                &quot;missed_max&quot;: 15,</span><br><span class="line">                &quot;target_host&quot;: &quot;fe80::210:18ff:feaa:bbcc&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;ports&quot;:        &#123;</span><br><span class="line">                &quot;eth0&quot;: &#123;</span><br><span class="line">                        &quot;prio&quot;: -10,</span><br><span class="line">                        &quot;sticky&quot;: true</span><br><span class="line">                &#125;,</span><br><span class="line">                &quot;eth1&quot;: &#123;</span><br><span class="line">                        &quot;prio&quot;: 100,</span><br><span class="line">                        &quot;link_watch&quot;: &#123;&quot;name&quot;: &quot;ethtool&quot;&#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &quot;eth2&quot;: &#123;</span><br><span class="line">                        &quot;link_watch&quot;:  &#123;</span><br><span class="line">                                &quot;name&quot;: &quot;arp_ping&quot;,</span><br><span class="line">                                &quot;interval&quot;: 100,</span><br><span class="line">                                &quot;missed_max&quot;: 30,</span><br><span class="line">                                &quot;source_host&quot;: &quot;192.168.23.2&quot;,</span><br><span class="line">                                &quot;target_host&quot;: &quot;192.168.23.1&quot;</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &quot;eth3&quot;: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置几乎不言自明。只有 link_watch 部分可能看起来有点混乱。所以在这个例子中，默认 link-watcher 是 nsna_ping，设置为每 200 毫秒发送 NAs（邻居通告）。丢失答复的最大数量为 15 个。如果丢失更多答复，link 将被视为关闭。 端口 eth1 和 eth2 指定他们自己的 link-watcher。</p>
<p>另一个 <em>teamd</em> 配置样例（<em>teamd2.conf</em>）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        &quot;device&quot;: &quot;team0&quot;,</span><br><span class="line">        &quot;runner&quot;: &#123;</span><br><span class="line">                &quot;name&quot;: &quot;lacp&quot;,</span><br><span class="line">                &quot;active&quot;: true,</span><br><span class="line">                &quot;fast_rate&quot;: true,</span><br><span class="line">                &quot;tx_hash&quot;: [&quot;eth&quot;, &quot;ipv4&quot;, &quot;ipv6&quot;]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;link_watch&quot;: &#123;&quot;name&quot;: &quot;ethtool&quot;&#125;,</span><br><span class="line">        &quot;ports&quot;: &#123;&quot;eth1&quot;: &#123;&#125;, &quot;eth2&quot;: &#123;&#125;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个样例中，<em>tx_hash</em> 一节值得一提。它指明使用 skb 哪些部分计算 hash。</p>
<p>更多详细内容见 manpage（<em>man 8 teamd.conf</em>）。</p>
<h3 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"># ip link</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN mode DEFAULT </span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:b2:a7:f1 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">3: eth3: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 00:07:e9:11:22:33 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">4: eth1: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:3d:c7:6d brd ff:ff:ff:ff:ff:ff</span><br><span class="line">5: eth2: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:73:15:c2 brd ff:ff:ff:ff:ff:ff</span><br><span class="line"># ip addr</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN </span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">    inet6 ::1/128 scope host </span><br><span class="line">      valid_lft forever preferred_lft forever</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 52:54:00:b2:a7:f1 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.122.182/24 brd 192.168.122.255 scope global eth0</span><br><span class="line">    inet6 fe80::5054:ff:feb2:a7f1/64 scope link </span><br><span class="line">      valid_lft forever preferred_lft forever</span><br><span class="line">3: eth3: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN qlen 1000</span><br><span class="line">    link/ether 00:07:e9:11:22:33 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">4: eth1: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN qlen 1000</span><br><span class="line">    link/ether 52:54:00:3d:c7:6d brd ff:ff:ff:ff:ff:ff</span><br><span class="line">5: eth2: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN qlen 1000</span><br><span class="line">    link/ether 52:54:00:73:15:c2 brd ff:ff:ff:ff:ff:ff</span><br><span class="line"># teamd -f teamd2.conf -d</span><br><span class="line"># ip link</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN mode DEFAULT </span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:b2:a7:f1 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">3: eth3: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 00:07:e9:11:22:33 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">4: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master team0 state UP mode DEFAULT qlen 1000</span><br><span class="line">    link/ether fa:29:06:7a:81:b8 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">5: eth2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master team0 state UP mode DEFAULT qlen 1000</span><br><span class="line">    link/ether fa:29:06:7a:81:b8 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">6: team0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT </span><br><span class="line">    link/ether fa:29:06:7a:81:b8 brd ff:ff:ff:ff:ff:ff</span><br><span class="line"># tail /var/log/messages</span><br><span class="line">May 24 10:56:02 test1 kernel: [  36.351762] team0: Port device eth1 added</span><br><span class="line">May 24 10:56:02 test1 kernel: [  36.357303] 8139cp 0000:00:08.0: eth2: link up, 100Mbps, full-duplex, lpa 0x05E1</span><br><span class="line">May 24 10:56:02 test1 kernel: [  36.359975] team0: Port device eth2 added</span><br><span class="line">May 24 10:56:02 test1 teamd[883]: 0.1 sucessfully started.</span><br><span class="line">May 24 10:56:03 test1 teamd[883]: eth1: Using link_watch &quot;ethtool&quot;.</span><br><span class="line">May 24 10:56:03 test1 teamd[883]: eth1: Changed port state: &quot;disabled&quot; -&gt; &quot;expired&quot;</span><br><span class="line">May 24 10:56:03 test1 teamd[883]: eth2: Using link_watch &quot;ethtool&quot;.</span><br><span class="line">May 24 10:56:03 test1 teamd[883]: eth2: Changed port state: &quot;disabled&quot; -&gt; &quot;expired&quot;</span><br><span class="line">May 24 10:56:03 test1 teamd[883]: eth1: Changed port state: &quot;expired&quot; -&gt; &quot;current&quot;</span><br><span class="line">May 24 10:56:03 test1 teamd[883]: eth2: Changed port state: &quot;expired&quot; -&gt; &quot;current&quot;</span><br><span class="line"># ip addr add 192.168.24.2/24 dev team0 </span><br><span class="line"># ping 192.168.24.1 -c 10 -i0.1</span><br><span class="line">PING 192.168.24.1 (192.168.24.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.24.1: icmp_req=1 ttl=64 time=0.511 ms</span><br><span class="line">64 bytes from 192.168.24.1: icmp_req=2 ttl=64 time=0.862 ms</span><br><span class="line">64 bytes from 192.168.24.1: icmp_req=3 ttl=64 time=0.927 ms</span><br><span class="line">64 bytes from 192.168.24.1: icmp_req=4 ttl=64 time=0.917 ms</span><br><span class="line">64 bytes from 192.168.24.1: icmp_req=5 ttl=64 time=0.966 ms</span><br><span class="line">64 bytes from 192.168.24.1: icmp_req=6 ttl=64 time=0.829 ms</span><br><span class="line">64 bytes from 192.168.24.1: icmp_req=7 ttl=64 time=0.916 ms</span><br><span class="line">64 bytes from 192.168.24.1: icmp_req=8 ttl=64 time=0.861 ms</span><br><span class="line">64 bytes from 192.168.24.1: icmp_req=9 ttl=64 time=0.866 ms</span><br><span class="line">64 bytes from 192.168.24.1: icmp_req=10 ttl=64 time=0.884 ms</span><br><span class="line"></span><br><span class="line">--- 192.168.24.1 ping statistics ---</span><br><span class="line">10 packets transmitted, 10 received, 0% packet loss, time 910ms</span><br><span class="line">rtt min/avg/max/mdev = 0.511/0.853/0.966/0.126 ms</span><br><span class="line"># teamd -f teamd2.conf -k</span><br><span class="line"># ip link</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN mode DEFAULT </span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:b2:a7:f1 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">3: eth3: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 00:07:e9:11:22:33 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">4: eth1: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:3d:c7:6d brd ff:ff:ff:ff:ff:ff</span><br><span class="line">5: eth2: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 52:54:00:73:15:c2 brd ff:ff:ff:ff:ff:ff</span><br></pre></td></tr></table></figure>
<h2 id="Bonding-v-s-team-features"><a href="#Bonding-v-s-team-features" class="headerlink" title="Bonding v.s. team features"></a>Bonding v.s. team features</h2><p>来源： <a href="https://github.com/jpirko/libteam/wiki/Bonding-vs.-Team-features" target="_blank" rel="noopener">https://github.com/jpirko/libteam/wiki/Bonding-vs.-Team-features</a><br>Feature    Bonding    Team<br>broadcast TX policy<br>Yes<br>Yes<br>round-robin TX policy<br>Yes<br>Yes<br>active-backup TX policy<br>Yes<br>Yes<br>LACP (802.3ad) support<br>Yes<br>Yes<br>Hash-based TX policy<br>Yes<br>Yes<br>Highly customizable hash function setup    No<br>Yes<br>TX load-balancing support (TLB)<br>Yes<br>Yes<br>RX load-balancing support (ALB)<br>Yes<br>Planned<br>RX load-balancing support (ALB) in bridge or openvswitch    No    Planned<br>LACP hash port select<br>Yes<br>Yes<br>load-balancing for LACP support    No<br>Yes<br>Ethtool link monitoring<br>Yes<br>Yes<br>ARP link monitoring<br>Yes<br>Yes<br>NS/NA (IPV6) link monitoring    No<br>Yes<br>ports up/down delays<br>Yes<br>Yes<br>port priorities and stickiness (“primary” option enhancement)    No<br>Yes<br>separate per-port link monitoring setup    No<br>Yes<br>multiple link monitoring setup    Limited<br>Yes<br>lockless TX/RX path    No(rwlock)<br>Yes<br>(RCU)<br>VLAN support<br>Yes<br>Yes<br>user-space runtime control    Limited    Full<br>Logic in user-space    No<br>Yes<br>Extensibility    Hard    Easy<br>Modular design    No<br>Yes<br>Performance overhead    Low    Very Low<br>D-Bus interface    No<br>Yes<br>ØMQ interface    No<br>Yes<br>multiple device stacking<br>Yes<br>Yes<br>zero config using LLDP    No    Planned</p>
<h2 id="man"><a href="#man" class="headerlink" title="man"></a>man</h2><h3 id="man-teamd"><a href="#man-teamd" class="headerlink" title="man teamd"></a>man teamd</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">js@js-vbox:~/sonic-buildimage/src/sonic-swss$ man teamd</span><br><span class="line">TEAMD(8)                                                                                    Team daemon                                                                                    TEAMD(8)</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">      teamd — team network device control daemon</span><br><span class="line"></span><br><span class="line">SYNOPSIS</span><br><span class="line">      teamd -k [-p pid_file] [-g]</span><br><span class="line">      teamd -e [-p pid_file] [-g]</span><br><span class="line">      teamd -c config_text [-p pid_file] [-gdrD] [-Z address]</span><br><span class="line">      teamd -f config_file [-p pid_file] [-gdrD] [-Z address]</span><br><span class="line">      teamd -h|-V</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">      teamd  is a daemon to control a given team network device, during runtime, as a puppeteer controls a puppet. It uses libteam to communicate with the kernel team device instance via Netlink</span><br><span class="line">      sockets. The behaviour depends on the selected runner and its configuration. This daemon is part of the libteam project.</span><br><span class="line"></span><br><span class="line">OPTIONS</span><br><span class="line">      -h, --help</span><br><span class="line">              Print help text to console and exit.</span><br><span class="line"></span><br><span class="line">      -V, --version</span><br><span class="line">              Print version information to console and exit.</span><br><span class="line"></span><br><span class="line">      -d, --daemonize</span><br><span class="line">              Daemonize after startup.</span><br><span class="line"></span><br><span class="line">      -k, --kill</span><br><span class="line">              Kill running daemon instance.</span><br><span class="line"></span><br><span class="line">      -e, --check</span><br><span class="line">              Return 0 if a daemon is already running.</span><br><span class="line"></span><br><span class="line">      -f filename, --config-file filename</span><br><span class="line">              Load the specified configuration file.</span><br><span class="line"></span><br><span class="line">      -c text, --config text</span><br><span class="line">              Use given JSON format configuration string. If this option is present then -f option will be ignored.</span><br><span class="line"></span><br><span class="line">      -p filename, --pid-file filename</span><br><span class="line">              Use the specified PID file.</span><br><span class="line"></span><br><span class="line">      -g, --debug</span><br><span class="line">              Turns on debugging messages. Repeating the option increases verbosity.</span><br><span class="line"></span><br><span class="line">      -r, --force-recreate</span><br><span class="line">              Force team device recreation in case it already exists.</span><br><span class="line"></span><br><span class="line">      -o, --take-over</span><br><span class="line">              Take over the device if it already exists.</span><br><span class="line"></span><br><span class="line">      -N, --no-quit-destroy</span><br><span class="line">              This option also ensures that the team device is not removed after teamd finishes.</span><br><span class="line"></span><br><span class="line">      -t devicename, --team-dev devicename</span><br><span class="line">              Use the specified team device name (overrides &quot;device&quot; key in the configuration).</span><br><span class="line"></span><br><span class="line">      -n, --no-ports</span><br><span class="line">              Start without ports, even if they are listed in the configuration.</span><br><span class="line"></span><br><span class="line">      -D, --dbus-enable</span><br><span class="line">              Enable D-Bus interface.</span><br><span class="line"></span><br><span class="line">      -Z address, --zmq-enable address</span><br><span class="line">              Enable ZMQ interface. Possible address formats are &quot;tcp://ip:port&quot;, &quot;ipc://path&quot; and others. Detailed description of ZMQ library is in page http://zguide.zeromq.org/page:all.</span><br><span class="line"></span><br><span class="line">      -U, --usock-enable</span><br><span class="line">              Enable UNIX domain socket interface. This is enabled by default.</span><br><span class="line"></span><br><span class="line">      -u, --usock-disable</span><br><span class="line">              Disable UNIX domain socket interface.</span><br><span class="line"></span><br><span class="line">SEE ALSO</span><br><span class="line">      teamdctl(8), teamd.conf(5), teamnl(8), bond2team(1)</span><br><span class="line"></span><br><span class="line">AUTHOR</span><br><span class="line">      Jiri Pirko is the original author and current maintainer of libteam.</span><br><span class="line"></span><br><span class="line">libteam                                                                                      2013-07-10                                                                                    TEAMD(8)</span><br></pre></td></tr></table></figure>
<h3 id="man-teamd-conf"><a href="#man-teamd-conf" class="headerlink" title="man teamd.conf"></a>man teamd.conf</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br></pre></td><td class="code"><pre><span class="line">js@js-vbox:~/sonic-buildimage/src/sonic-swss$ man teamd.conf</span><br><span class="line">TEAMD.CONF(5)                                                                        Team daemon configuration                                                                        TEAMD.CONF(5)</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">      teamd.conf — libteam daemon configuration file</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">      teamd uses JSON format configuration.</span><br><span class="line"></span><br><span class="line">OPTIONS</span><br><span class="line">      device (string)</span><br><span class="line">              Desired name of new team device.</span><br><span class="line"></span><br><span class="line">      debug_level (int)</span><br><span class="line">              Level of debug messages. The higher it is the more debug messages will be printed. It is the same as adding &quot;-g&quot; command line options.</span><br><span class="line"></span><br><span class="line">              Default: 0 (disabled)</span><br><span class="line"></span><br><span class="line">      hwaddr (string)</span><br><span class="line">              Desired hardware address of new team device. Usual MAC address format is accepted.</span><br><span class="line"></span><br><span class="line">      runner.name (string)</span><br><span class="line">              Name of team device. The following runners are available:</span><br><span class="line"></span><br><span class="line">              broadcast — Simple runner which directs the team device to transmit packets via all ports.</span><br><span class="line"></span><br><span class="line">              roundrobin — Simple runner which directs the team device to transmits packets in a round-robin fashion.</span><br><span class="line"></span><br><span class="line">              activebackup — Watches for link changes and selects active port to be used for data transfers.</span><br><span class="line"></span><br><span class="line">              loadbalance  —  To  do  passive load balancing, runner only sets up BPF hash function which will determine port for packet transmit. To do active load balancing, runner moves hashes</span><br><span class="line">              among available ports trying to reach perfect balance.</span><br><span class="line"></span><br><span class="line">              lacp — Implements 802.3ad LACP protocol. Can use same Tx port selection possibilities as loadbalance runner.</span><br><span class="line"></span><br><span class="line">      notify_peers.count (int)</span><br><span class="line">              Number of bursts of unsolicited NAs and gratuitous ARP packets sent after port is enabled or disabled.</span><br><span class="line"></span><br><span class="line">              Default: 0 (disabled)</span><br><span class="line"></span><br><span class="line">              Default for activebackup runner: 1</span><br><span class="line"></span><br><span class="line">      notify_peers.interval (int)</span><br><span class="line">              Value is positive number in milliseconds. Specifies an interval between bursts of notify-peer packets.</span><br><span class="line"></span><br><span class="line">              Default: 0</span><br><span class="line"></span><br><span class="line">      mcast_rejoin.count (int)</span><br><span class="line">              Number of bursts of multicast group rejoin requests sent after port is enabled or disabled.</span><br><span class="line"></span><br><span class="line">              Default: 0 (disabled)</span><br><span class="line"></span><br><span class="line">              Default for activebackup runner: 1</span><br><span class="line"></span><br><span class="line">      mcast_rejoin.interval (int)</span><br><span class="line">              Value is positive number in milliseconds. Specifies an interval between bursts of multicast group rejoin requests.</span><br><span class="line"></span><br><span class="line">              Default: 0</span><br><span class="line"></span><br><span class="line">      link_watch.name | ports.PORTIFNAME.link_watch.name (string)</span><br><span class="line">              Name of link watcher to be used. The following link watchers are available:</span><br><span class="line"></span><br><span class="line">              ethtool — Uses Libteam lib to get port ethtool state changes.</span><br><span class="line"></span><br><span class="line">              arp_ping — ARP requests are sent through a port. If an ARP reply is received, the link is considered to be up.</span><br><span class="line"></span><br><span class="line">              nsna_ping — Similar to the previous, except that it uses IPv6 Neighbor Solicitation / Neighbor Advertisement mechanism. This is an alternative to arp_ping and becomes handy in pure-</span><br><span class="line">              IPv6 environments.</span><br><span class="line"></span><br><span class="line">              ports (object)</span><br><span class="line">                    List of ports, network devices, to be used in a team device.</span><br><span class="line"></span><br><span class="line">              See examples for more information.</span><br><span class="line"></span><br><span class="line">      ports.PORTIFNAME.queue_id (int)</span><br><span class="line">              ID of queue which this port should be mapped to.</span><br><span class="line"></span><br><span class="line">              Default: None</span><br><span class="line"></span><br><span class="line">ACTIVE-BACKUP RUNNER SPECIFIC OPTIONS</span><br><span class="line">      runner.hwaddr_policy (string)</span><br><span class="line">              This defines the policy of how hardware addresses of team device and port devices should be set during the team lifetime. The following are available:</span><br><span class="line"></span><br><span class="line">              same_all — All ports will always have the same hardware address as the associated team device.</span><br><span class="line"></span><br><span class="line">              by_active — Team device adopts the hardware address of the currently active port. This is useful when the port device is not able to change its hardware address.</span><br><span class="line"></span><br><span class="line">              only_active — Only the active port adopts the hardware address of the team device. The others have their own.</span><br><span class="line"></span><br><span class="line">              Default: same_all</span><br><span class="line"></span><br><span class="line">      ports.PORTIFNAME.prio (int)</span><br><span class="line">              Port priority. The higher number means higher priority.</span><br><span class="line"></span><br><span class="line">              Default: 0</span><br><span class="line"></span><br><span class="line">      ports.PORTIFNAME.sticky (bool)</span><br><span class="line">              Flag which indicates if the port is sticky. If set, it means the port does not get unselected if another port with higher priority or better parameters becomes available.</span><br><span class="line"></span><br><span class="line">              Default: false</span><br><span class="line"></span><br><span class="line">LOAD BALANCE RUNNER SPECIFIC OPTIONS</span><br><span class="line">      runner.tx_hash (array)</span><br><span class="line">              List of fragment types (strings) which should be used for packet Tx hash computation. The following are available:</span><br><span class="line"></span><br><span class="line">              eth — Uses source and destination MAC addresses.</span><br><span class="line"></span><br><span class="line">              vlan — Uses VLAN id.</span><br><span class="line"></span><br><span class="line">              ipv4 — Uses source and destination IPv4 addresses.</span><br><span class="line"></span><br><span class="line">              ipv6 — Uses source and destination IPv6 addresses.</span><br><span class="line"></span><br><span class="line">              ip — Uses source and destination IPv4 and IPv6 addresses.</span><br><span class="line"></span><br><span class="line">              l3 — Uses source and destination IPv4 and IPv6 addresses.</span><br><span class="line"></span><br><span class="line">              tcp — Uses source and destination TCP ports.</span><br><span class="line"></span><br><span class="line">              udp — Uses source and destination UDP ports.</span><br><span class="line"></span><br><span class="line">              sctp — Uses source and destination SCTP ports.</span><br><span class="line"></span><br><span class="line">              l4 — Uses source and destination TCP and UDP and SCTP ports.</span><br><span class="line"></span><br><span class="line">      runner.tx_balancer.name (string)</span><br><span class="line">              Name of active Tx balancer. Active Tx balancing is disabled by default. The only value available is basic.</span><br><span class="line"></span><br><span class="line">              Default: None</span><br><span class="line"></span><br><span class="line">      runner.tx_balancer.balancing_interval (int)</span><br><span class="line">              In tenths of a second. Periodic interval between rebalancing.</span><br><span class="line"></span><br><span class="line">              Default: 50</span><br><span class="line"></span><br><span class="line">LACP RUNNER SPECIFIC OPTIONS</span><br><span class="line">      runner.active (bool)</span><br><span class="line">              If active is true LACPDU frames are sent along the configured links periodically. If not, it acts as &quot;speak when spoken to&quot;.</span><br><span class="line"></span><br><span class="line">              Default: true</span><br><span class="line"></span><br><span class="line">      runner.fast_rate (bool)</span><br><span class="line">              Option specifies the rate at which our link partner is asked to transmit LACPDU packets. If this is true then packets will be sent once per second. Otherwise they will be sent every</span><br><span class="line">              30 seconds.</span><br><span class="line"></span><br><span class="line">      runner.tx_hash (array)</span><br><span class="line">              Same as for load balance runner.</span><br><span class="line"></span><br><span class="line">      runner.tx_balancer.name (string)</span><br><span class="line">              Same as for load balance runner.</span><br><span class="line"></span><br><span class="line">      runner.tx_balancer.balancing_interval (int)</span><br><span class="line">              Same as for load balance runner.</span><br><span class="line"></span><br><span class="line">      runner.sys_prio (int)</span><br><span class="line">              System priority, value can be 0 – 65535.</span><br><span class="line"></span><br><span class="line">              Default: 255</span><br><span class="line"></span><br><span class="line">      runner.min_ports (int) </span><br><span class="line">              Specifies the minimum number of ports that must be active before asserting carrier in the master interface, value can be 1 – 255. 成员口大于等于此值时，LACP 才会 Up，否则 Carrier down。</span><br><span class="line"></span><br><span class="line">              Default: 0</span><br><span class="line"></span><br><span class="line">      runner.agg_select_policy (string)</span><br><span class="line">              This selects the policy of how the aggregators will be selected. The following are available:</span><br><span class="line"></span><br><span class="line">              lacp_prio — Aggregator with highest priority according to LACP standard will be selected. Aggregator priority is affected by per-port option lacp_prio.</span><br><span class="line"></span><br><span class="line">              lacp_prio_stable — Same as previous one, except do not replace selected aggregator if it is still usable.</span><br><span class="line"></span><br><span class="line">              bandwidth — Select aggregator with highest total bandwidth.</span><br><span class="line"></span><br><span class="line">              count — Select aggregator with highest number of ports.</span><br><span class="line"></span><br><span class="line">              port_options — Aggregator with highest priority according to per-port options prio and sticky will be selected. This means that the aggregator containing the port with  the  highest</span><br><span class="line">              priority will be selected unless at least one of the ports in the currently selected aggregator is sticky.</span><br><span class="line"></span><br><span class="line">              Default: lacp_prio</span><br><span class="line"></span><br><span class="line">      ports.PORTIFNAME.lacp_prio (int)</span><br><span class="line">              Port priority according to LACP standard. The lower number means higher priority.</span><br><span class="line"></span><br><span class="line">      ports.PORTIFNAME.lacp_key (int)</span><br><span class="line">              Port key according to LACP standard. It is only possible to aggregate ports with the same key.</span><br><span class="line"></span><br><span class="line">              Default: 0</span><br><span class="line"></span><br><span class="line">ETHTOOL LINK WATCH SPECIFIC OPTIONS</span><br><span class="line">      link_watch.delay_up | ports.PORTIFNAME.link_watch.delay_up (int)</span><br><span class="line">              Value is a positive number in milliseconds. It is the delay between the link coming up and the runner being notified about it.</span><br><span class="line"></span><br><span class="line">              Default: 0</span><br><span class="line"></span><br><span class="line">      link_watch.delay_down | ports.PORTIFNAME.link_watch.delay_down (int)</span><br><span class="line">              Value is a positive number in milliseconds. It is the delay between the link going down and the runner being notified about it.</span><br><span class="line"></span><br><span class="line">              Default: 0</span><br><span class="line"></span><br><span class="line">ARP PING LINK WATCH SPECIFIC OPTIONS</span><br><span class="line">      link_watch.interval | ports.PORTIFNAME.link_watch.interval (int)</span><br><span class="line">              Value is a positive number in milliseconds. It is the interval between ARP requests being sent.</span><br><span class="line"></span><br><span class="line">      link_watch.init_wait | ports.PORTIFNAME.link_watch.init_wait (int)</span><br><span class="line">              Value is a positive number in milliseconds. It is the delay between link watch initialization and the first ARP request being sent.</span><br><span class="line"></span><br><span class="line">              Default: 0</span><br><span class="line"></span><br><span class="line">      link_watch.missed_max | ports.PORTIFNAME.link_watch.missed_max (int)</span><br><span class="line">              Maximum number of missed ARP replies. If this number is exceeded, link is reported as down.</span><br><span class="line"></span><br><span class="line">              Default: 3</span><br><span class="line"></span><br><span class="line">      link_watch.source_host | ports.PORTIFNAME.link_watch.source_host (hostname)</span><br><span class="line">              Hostname to be converted to IP address which will be filled into ARP request as source address.</span><br><span class="line"></span><br><span class="line">              Default: 0.0.0.0</span><br><span class="line"></span><br><span class="line">      link_watch.target_host | ports.PORTIFNAME.link_watch.target_host (hostname)</span><br><span class="line">              Hostname to be converted to IP address which will be filled into ARP request as destination address.</span><br><span class="line"></span><br><span class="line">      link_watch.validate_active | ports.PORTIFNAME.link_watch.validate_active (bool)</span><br><span class="line">              Validate received ARP packets on active ports. If this is not set, all incoming ARP packets will be considered as a good reply.</span><br><span class="line"></span><br><span class="line">              Default: false</span><br><span class="line"></span><br><span class="line">      link_watch.validate_inactive | ports.PORTIFNAME.link_watch.validate_inactive (bool)</span><br><span class="line">              Validate received ARP packets on inactive ports. If this is not set, all incoming ARP packets will be considered as a good reply.</span><br><span class="line"></span><br><span class="line">              Default: false</span><br><span class="line"></span><br><span class="line">      link_watch.send_always | ports.PORTIFNAME.link_watch.send_always (bool)</span><br><span class="line">              By default, ARP requests are sent on active ports only. This option allows sending even on inactive ports.</span><br><span class="line"></span><br><span class="line">      Default: false</span><br><span class="line"></span><br><span class="line">NS/NA PING LINK WATCH SPECIFIC OPTIONS</span><br><span class="line">      link_watch.interval | ports.PORTIFNAME.link_watch.interval (int)</span><br><span class="line">              Value is a positive number in milliseconds. It is the interval between sending NS packets.</span><br><span class="line"></span><br><span class="line">      link_watch.init_wait | ports.PORTIFNAME.link_watch.init_wait (int)</span><br><span class="line">              Value is a positive number in milliseconds. It is the delay between link watch initialization and the first NS packet being sent.</span><br><span class="line"></span><br><span class="line">      link_watch.missed_max | ports.PORTIFNAME.link_watch.missed_max (int)</span><br><span class="line">              Maximum number of missed NA reply packets. If this number is exceeded, link is reported as down.</span><br><span class="line"></span><br><span class="line">              Default: 3</span><br><span class="line"></span><br><span class="line">      link_watch.target_host | ports.PORTIFNAME.link_watch.target_host (hostname)</span><br><span class="line">              Hostname to be converted to IPv6 address which will be filled into NS packet as target address.</span><br><span class="line"></span><br><span class="line">EXAMPLES</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;device&quot;: &quot;team0&quot;,</span><br><span class="line">        &quot;runner&quot;: &#123;&quot;name&quot;: &quot;roundrobin&quot;&#125;,</span><br><span class="line">        &quot;ports&quot;: &#123;&quot;eth1&quot;: &#123;&#125;, &quot;eth2&quot;: &#123;&#125;&#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      Very basic configuration.</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        &quot;device&quot;: &quot;team0&quot;,</span><br><span class="line">        &quot;runner&quot;: &#123;&quot;name&quot;: &quot;activebackup&quot;&#125;,</span><br><span class="line">        &quot;link_watch&quot;: &#123;&quot;name&quot;: &quot;ethtool&quot;&#125;,</span><br><span class="line">        &quot;ports&quot;: &#123;</span><br><span class="line">          &quot;eth1&quot;: &#123;</span><br><span class="line">            &quot;prio&quot;: -10,</span><br><span class="line">            &quot;sticky&quot;: true</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;eth2&quot;: &#123;</span><br><span class="line">            &quot;prio&quot;: 100</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      This  configuration  uses  active-backup runner with ethtool link watcher. Port eth2 has higher priority, but the sticky flag ensures that if eth1 becomes active, it stays active while the</span><br><span class="line">      link remains up.</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        &quot;device&quot;: &quot;team0&quot;,</span><br><span class="line">        &quot;runner&quot;: &#123;&quot;name&quot;: &quot;activebackup&quot;&#125;,</span><br><span class="line">        &quot;link_watch&quot;: &#123;</span><br><span class="line">          &quot;name&quot;: &quot;ethtool&quot;,</span><br><span class="line">          &quot;delay_up&quot;: 2500,</span><br><span class="line">          &quot;delay_down&quot;: 1000</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;ports&quot;: &#123;</span><br><span class="line">          &quot;eth1&quot;: &#123;</span><br><span class="line">            &quot;prio&quot;: -10,</span><br><span class="line">            &quot;sticky&quot;: true</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;eth2&quot;: &#123;</span><br><span class="line">            &quot;prio&quot;: 100</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      Similar to the previous one. Only difference is that link changes are not propagated to the runner immediately, but delays are applied.</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        &quot;device&quot;: &quot;team0&quot;,</span><br><span class="line">        &quot;runner&quot;: &#123;&quot;name&quot;: &quot;activebackup&quot;&#125;,</span><br><span class="line">        &quot;link_watch&quot;:    &#123;</span><br><span class="line">          &quot;name&quot;: &quot;arp_ping&quot;,</span><br><span class="line">          &quot;interval&quot;: 100,</span><br><span class="line">          &quot;missed_max&quot;: 30,</span><br><span class="line">          &quot;target_host&quot;: &quot;192.168.23.1&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;ports&quot;: &#123;</span><br><span class="line">          &quot;eth1&quot;: &#123;</span><br><span class="line">            &quot;prio&quot;: -10,</span><br><span class="line">            &quot;sticky&quot;: true</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;eth2&quot;: &#123;</span><br><span class="line">            &quot;prio&quot;: 100</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      This configuration uses ARP ping link watch.</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">      &quot;device&quot;: &quot;team0&quot;,</span><br><span class="line">      &quot;runner&quot;: &#123;&quot;name&quot;: &quot;activebackup&quot;&#125;,</span><br><span class="line">      &quot;link_watch&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;arp_ping&quot;,</span><br><span class="line">          &quot;interval&quot;: 100,</span><br><span class="line">          &quot;missed_max&quot;: 30,</span><br><span class="line">          &quot;target_host&quot;: &quot;192.168.23.1&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;arp_ping&quot;,</span><br><span class="line">          &quot;interval&quot;: 50,</span><br><span class="line">          &quot;missed_max&quot;: 20,</span><br><span class="line">          &quot;target_host&quot;: &quot;192.168.24.1&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;ports&quot;: &#123;</span><br><span class="line">        &quot;eth1&quot;: &#123;</span><br><span class="line">          &quot;prio&quot;: -10,</span><br><span class="line">          &quot;sticky&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;eth2&quot;: &#123;</span><br><span class="line">          &quot;prio&quot;: 100</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      Similar to the previous one, only this time two link watchers are used at the same time.</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        &quot;device&quot;: &quot;team0&quot;,</span><br><span class="line">        &quot;runner&quot;: &#123;</span><br><span class="line">          &quot;name&quot;: &quot;loadbalance&quot;,</span><br><span class="line">          &quot;tx_hash&quot;: [&quot;eth&quot;, &quot;ipv4&quot;, &quot;ipv6&quot;]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;ports&quot;: &#123;&quot;eth1&quot;: &#123;&#125;, &quot;eth2&quot;: &#123;&#125;&#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      Configuration for hash-based passive Tx load balancing.</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        &quot;device&quot;: &quot;team0&quot;,</span><br><span class="line">        &quot;runner&quot;: &#123;</span><br><span class="line">          &quot;name&quot;: &quot;loadbalance&quot;,</span><br><span class="line">          &quot;tx_hash&quot;: [&quot;eth&quot;, &quot;ipv4&quot;, &quot;ipv6&quot;],</span><br><span class="line">          &quot;tx_balancer&quot;: &#123;</span><br><span class="line">            &quot;name&quot;: &quot;basic&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;ports&quot;: &#123;&quot;eth1&quot;: &#123;&#125;, &quot;eth2&quot;: &#123;&#125;&#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      Configuration for active Tx load balancing using basic load balancer.</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        &quot;device&quot;: &quot;team0&quot;,</span><br><span class="line">        &quot;runner&quot;: &#123;</span><br><span class="line">          &quot;name&quot;: &quot;lacp&quot;,</span><br><span class="line">          &quot;active&quot;: true,</span><br><span class="line">          &quot;fast_rate&quot;: true,</span><br><span class="line">          &quot;tx_hash&quot;: [&quot;eth&quot;, &quot;ipv4&quot;, &quot;ipv6&quot;]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;link_watch&quot;: &#123;&quot;name&quot;: &quot;ethtool&quot;&#125;,</span><br><span class="line">        &quot;ports&quot;: &#123;&quot;eth1&quot;: &#123;&#125;, &quot;eth2&quot;: &#123;&#125;&#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      Configuration for connection to LACP capable counterpart.</span><br><span class="line"></span><br><span class="line">SEE ALSO</span><br><span class="line">      teamd(8), teamdctl(8), teamnl(8), bond2team(1)</span><br><span class="line"></span><br><span class="line">AUTHOR</span><br><span class="line">      Jiri Pirko is the original author and current maintainer of libteam.</span><br><span class="line"></span><br><span class="line">libteam                                                                                      2013-07-09                                                                              TEAMD.CONF(5)</span><br></pre></td></tr></table></figure>
<h3 id="man-teamdctl"><a href="#man-teamdctl" class="headerlink" title="man teamdctl"></a>man teamdctl</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">js@js-vbox:~/sonic-buildimage/src/sonic-swss$ man teamdctl</span><br><span class="line">TEAMDCTL(8)                                                                                teamd control                                                                                TEAMDCTL(8)</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">      teamdctl — team daemon control tool</span><br><span class="line"></span><br><span class="line">SYNOPSIS</span><br><span class="line">      teamdctl [options] team_device command [command_args...]</span><br><span class="line">      teamdctl -h</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">      teamdctl  is  a  tool that allows a user to interact with a running teamd instance.  It defaults to using Unix Domain Sockets, but will fall back to using the D-Bus API, to ensure reliable</span><br><span class="line">      operation in all environments.</span><br><span class="line"></span><br><span class="line">OPTIONS</span><br><span class="line">      -h, --help</span><br><span class="line">              Print help text to console and exit.</span><br><span class="line"></span><br><span class="line">      -v, --verbosity</span><br><span class="line">              Increase output verbosity.</span><br><span class="line"></span><br><span class="line">      -o, --oneline</span><br><span class="line">              Force output to one line if possible.</span><br><span class="line"></span><br><span class="line">      -D, --force-dbus</span><br><span class="line">              Force to use D-Bus interface.</span><br><span class="line"></span><br><span class="line">      -Z address, --force-zmq address</span><br><span class="line">              Force to use ZMQ interface. Possible address formats are &quot;tcp://ip:port&quot;, &quot;ipc://path&quot; and others. Detailed description of ZMQ library is in page http://zguide.zeromq.org/page:all.</span><br><span class="line"></span><br><span class="line">      -U, --force-usock</span><br><span class="line">              Force to use UNIX domain socket interface. This is the default behavior.</span><br><span class="line"></span><br><span class="line">COMMAND</span><br><span class="line">      config dump</span><br><span class="line">              Dumps teamd JSON config.</span><br><span class="line"></span><br><span class="line">      config dump noports</span><br><span class="line">              Dumps teamd JSON configuration without &quot;ports&quot; section included.</span><br><span class="line"></span><br><span class="line">      config dump actual</span><br><span class="line">              Dumps teamd actual JSON configuration. It includes ports which are currently present.</span><br><span class="line"></span><br><span class="line">      state dump | state</span><br><span class="line">              Dumps teamd JSON state document.</span><br><span class="line"></span><br><span class="line">      state view</span><br><span class="line">              Prints out state of teamd parsed from JSON state document.</span><br><span class="line"></span><br><span class="line">      state item get state_item_path</span><br><span class="line">              Finds state item in JSON state document and returns its value.</span><br><span class="line"></span><br><span class="line">      state item set state_item_path value</span><br><span class="line">              Finds state item in JSON state document and sets its value by value parameter. This is available only for a limited number of paths:</span><br><span class="line"></span><br><span class="line">              setup.debug_level — User can set debug level. Higher level is more verbose.</span><br><span class="line"></span><br><span class="line">              ports.PORTIFNAME.runner.aggregator.selected — This is available for lacp runner. User can manually select the aggregator.</span><br><span class="line"></span><br><span class="line">              runner.active_port — This is available for activebackup runner. User can manually select the active port.</span><br><span class="line"></span><br><span class="line">      port add portdev</span><br><span class="line">              Takes port device name as argument. Adds port device into team.</span><br><span class="line"></span><br><span class="line">      port remove portdev</span><br><span class="line">              Takes port device name as argument. Removes port device from team.</span><br><span class="line"></span><br><span class="line">      port present portdev</span><br><span class="line">              Takes port device name as argument. Checks if the port device is present in team.</span><br><span class="line"></span><br><span class="line">      port config update portdev portconfig-string</span><br><span class="line">              Takes port device name as the first argument and JSON format configuration string as the second argument. Updates port device configuration.</span><br><span class="line"></span><br><span class="line">      port config dump portdev</span><br><span class="line">              Takes port device name as the first argument. Dumps port device JSON configuration to standard output.</span><br><span class="line"></span><br><span class="line">SEE ALSO</span><br><span class="line">      teamd(8), teamnl(8), teamd.conf(5)</span><br><span class="line"></span><br><span class="line">AUTHOR</span><br><span class="line">      Jiri Pirko is the original author and current maintainer of libteam.</span><br><span class="line"></span><br><span class="line">libteam                                                                                      2013-05-24                                                                                TEAMDCTL(8)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/02/06/programmer/linux/libteam/" data-id="cjz95gt6200mgw5r9c0lwq0eq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/libteam/">libteam</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/02/06/linux/debian_debug_package/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          deb debug package
        
      </div>
    </a>
  
  
    <a href="/2018/02/06/linux/deb_without_network/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">无网络下安装常用 deb 包</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/administrator/">administrator</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/c/">c</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/dokuwiki/">dokuwiki</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/">kernel</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/life/">life</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/misc/">misc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/networks/">networks</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/newTech/">newTech</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/p4/">p4</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/programmer/">programmer</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools-administrator/">tools, administrator</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/">windows</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/yocto/">yocto</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/思考/">思考</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARP/">ARP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CPU/">CPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Excel/">Excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GDB/">GDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/L2/">L2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MTU/">MTU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NOS/">NOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SecureCRT/">SecureCRT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/administrator/">administrator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/app/">app</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apt/">apt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arm/">arm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arp/">arp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cable/">cable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/clock/">clock</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compile/">compile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/configure/">configure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coredump/">coredump</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dataplane/">dataplane</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deb/">deb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debian/">debian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discourse/">discourse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dokuwiki/">dokuwiki</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dos/">dos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elementary/">elementary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fcitx/">fcitx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gcc/">gcc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gnome-terminal/">gnome-terminal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grub/">grub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/int/">int</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kconfig/">kconfig</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kernel/">kernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lib/">lib</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/libteam/">libteam</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/makefile/">makefile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mirror/">mirror</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/misc/">misc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/moinmoin/">moinmoin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nat/">nat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/networks/">networks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openswitch/">openswitch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/p4/">p4</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/packet/">packet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paper/">paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/perf/">perf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/">pip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ppp/">ppp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pppoe-networks/">pppoe networks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/profiling/">profiling</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/programmer/">programmer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/quagga/">quagga</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redhat/">redhat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpc/">rpc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpm/">rpm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scp/">scp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/serialport/">serialport</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/server/">server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/software/">software</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sshd/">sshd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/telnet/">telnet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/terminal/">terminal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/time/">time</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tuntap/">tuntap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vagrant/">vagrant</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/veth/">veth</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/virtualBox/">virtualBox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vlc/">vlc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vnc/">vnc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wiki/">wiki</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wine/">wine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wireshark/">wireshark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wps/">wps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xterm/">xterm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yocto/">yocto</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/串口/">串口</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/交叉编译/">交叉编译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/交换机/">交换机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内存管理/">内存管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/外面的世界/">外面的世界</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字符流操作/">字符流操作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/思考/">思考</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件共享/">文件共享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件系统/">文件系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/新技术点/">新技术点</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版本控制/">版本控制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/磁盘管理/">磁盘管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络测试/">网络测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/虚拟机/">虚拟机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调试/">调试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/路由协议/">路由协议</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/进程/">进程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/远程登录/">远程登录</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ARP/" style="font-size: 10px;">ARP</a> <a href="/tags/CPU/" style="font-size: 10px;">CPU</a> <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/GDB/" style="font-size: 10px;">GDB</a> <a href="/tags/L2/" style="font-size: 10px;">L2</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/MTU/" style="font-size: 10px;">MTU</a> <a href="/tags/NOS/" style="font-size: 10px;">NOS</a> <a href="/tags/SecureCRT/" style="font-size: 11.82px;">SecureCRT</a> <a href="/tags/administrator/" style="font-size: 17.27px;">administrator</a> <a href="/tags/app/" style="font-size: 10px;">app</a> <a href="/tags/apt/" style="font-size: 10.91px;">apt</a> <a href="/tags/arm/" style="font-size: 10px;">arm</a> <a href="/tags/arp/" style="font-size: 10px;">arp</a> <a href="/tags/c/" style="font-size: 16.36px;">c</a> <a href="/tags/cable/" style="font-size: 10px;">cable</a> <a href="/tags/centos/" style="font-size: 10px;">centos</a> <a href="/tags/clock/" style="font-size: 10px;">clock</a> <a href="/tags/compile/" style="font-size: 10.91px;">compile</a> <a href="/tags/configure/" style="font-size: 10px;">configure</a> <a href="/tags/coredump/" style="font-size: 10px;">coredump</a> <a href="/tags/dataplane/" style="font-size: 10px;">dataplane</a> <a href="/tags/deb/" style="font-size: 13.64px;">deb</a> <a href="/tags/debian/" style="font-size: 10.91px;">debian</a> <a href="/tags/discourse/" style="font-size: 10px;">discourse</a> <a href="/tags/docker/" style="font-size: 10.91px;">docker</a> <a href="/tags/dokuwiki/" style="font-size: 12.73px;">dokuwiki</a> <a href="/tags/dos/" style="font-size: 10px;">dos</a> <a href="/tags/elementary/" style="font-size: 10px;">elementary</a> <a href="/tags/fcitx/" style="font-size: 10px;">fcitx</a> <a href="/tags/gcc/" style="font-size: 10px;">gcc</a> <a href="/tags/git/" style="font-size: 15.45px;">git</a> <a href="/tags/gnome-terminal/" style="font-size: 10px;">gnome-terminal</a> <a href="/tags/grub/" style="font-size: 10px;">grub</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/int/" style="font-size: 10.91px;">int</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/kconfig/" style="font-size: 10px;">kconfig</a> <a href="/tags/kernel/" style="font-size: 11.82px;">kernel</a> <a href="/tags/lib/" style="font-size: 10px;">lib</a> <a href="/tags/libteam/" style="font-size: 10px;">libteam</a> <a href="/tags/linux/" style="font-size: 13.64px;">linux</a> <a href="/tags/makefile/" style="font-size: 10px;">makefile</a> <a href="/tags/mirror/" style="font-size: 10px;">mirror</a> <a href="/tags/misc/" style="font-size: 11.82px;">misc</a> <a href="/tags/moinmoin/" style="font-size: 10px;">moinmoin</a> <a href="/tags/nat/" style="font-size: 10px;">nat</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/networks/" style="font-size: 14.55px;">networks</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/openswitch/" style="font-size: 10.91px;">openswitch</a> <a href="/tags/p4/" style="font-size: 14.55px;">p4</a> <a href="/tags/packet/" style="font-size: 10.91px;">packet</a> <a href="/tags/paper/" style="font-size: 10px;">paper</a> <a href="/tags/perf/" style="font-size: 10px;">perf</a> <a href="/tags/pip/" style="font-size: 10px;">pip</a> <a href="/tags/ppp/" style="font-size: 10px;">ppp</a> <a href="/tags/pppoe-networks/" style="font-size: 10px;">pppoe networks</a> <a href="/tags/profiling/" style="font-size: 10px;">profiling</a> <a href="/tags/programmer/" style="font-size: 10px;">programmer</a> <a href="/tags/python/" style="font-size: 13.64px;">python</a> <a href="/tags/quagga/" style="font-size: 10px;">quagga</a> <a href="/tags/redhat/" style="font-size: 10px;">redhat</a> <a href="/tags/redis/" style="font-size: 10.91px;">redis</a> <a href="/tags/rpc/" style="font-size: 10px;">rpc</a> <a href="/tags/rpm/" style="font-size: 10px;">rpm</a> <a href="/tags/scp/" style="font-size: 10px;">scp</a> <a href="/tags/serialport/" style="font-size: 10.91px;">serialport</a> <a href="/tags/server/" style="font-size: 10px;">server</a> <a href="/tags/software/" style="font-size: 10px;">software</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/sshd/" style="font-size: 10px;">sshd</a> <a href="/tags/svn/" style="font-size: 10.91px;">svn</a> <a href="/tags/telnet/" style="font-size: 10px;">telnet</a> <a href="/tags/terminal/" style="font-size: 10px;">terminal</a> <a href="/tags/time/" style="font-size: 10px;">time</a> <a href="/tags/tuntap/" style="font-size: 10px;">tuntap</a> <a href="/tags/ubuntu/" style="font-size: 19.09px;">ubuntu</a> <a href="/tags/vagrant/" style="font-size: 10px;">vagrant</a> <a href="/tags/veth/" style="font-size: 10px;">veth</a> <a href="/tags/vim/" style="font-size: 11.82px;">vim</a> <a href="/tags/virtualBox/" style="font-size: 10px;">virtualBox</a> <a href="/tags/vlc/" style="font-size: 10px;">vlc</a> <a href="/tags/vnc/" style="font-size: 10px;">vnc</a> <a href="/tags/wiki/" style="font-size: 10px;">wiki</a> <a href="/tags/windows/" style="font-size: 12.73px;">windows</a> <a href="/tags/wine/" style="font-size: 10px;">wine</a> <a href="/tags/wireshark/" style="font-size: 10px;">wireshark</a> <a href="/tags/wps/" style="font-size: 10px;">wps</a> <a href="/tags/xterm/" style="font-size: 10px;">xterm</a> <a href="/tags/yocto/" style="font-size: 10.91px;">yocto</a> <a href="/tags/串口/" style="font-size: 10.91px;">串口</a> <a href="/tags/交叉编译/" style="font-size: 10px;">交叉编译</a> <a href="/tags/交换机/" style="font-size: 10px;">交换机</a> <a href="/tags/内存管理/" style="font-size: 10px;">内存管理</a> <a href="/tags/外面的世界/" style="font-size: 10px;">外面的世界</a> <a href="/tags/字符流操作/" style="font-size: 10.91px;">字符流操作</a> <a href="/tags/思考/" style="font-size: 10.91px;">思考</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/文件共享/" style="font-size: 10px;">文件共享</a> <a href="/tags/文件系统/" style="font-size: 18.18px;">文件系统</a> <a href="/tags/新技术点/" style="font-size: 10px;">新技术点</a> <a href="/tags/版本控制/" style="font-size: 15.45px;">版本控制</a> <a href="/tags/磁盘管理/" style="font-size: 10px;">磁盘管理</a> <a href="/tags/网络测试/" style="font-size: 12.73px;">网络测试</a> <a href="/tags/虚拟机/" style="font-size: 10px;">虚拟机</a> <a href="/tags/调试/" style="font-size: 10px;">调试</a> <a href="/tags/路由协议/" style="font-size: 10px;">路由协议</a> <a href="/tags/进程/" style="font-size: 10px;">进程</a> <a href="/tags/远程登录/" style="font-size: 12.73px;">远程登录</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/07/23/misc/screen_too_bright/">屏幕太“亮”看不清灰色部分</a>
          </li>
        
          <li>
            <a href="/2019/03/25/linux/elementaryos/">elementary OS 使用记录</a>
          </li>
        
          <li>
            <a href="/2019/01/31/tools/git_cmd/">一些常见的 git 命令备忘</a>
          </li>
        
          <li>
            <a href="/2019/01/24/networks/rpc.rpc_poll.rpc_streaming/">图解 rpc rpc_poll 和 rpc_streaming 的差异</a>
          </li>
        
          <li>
            <a href="/2018/11/01/programmer/tools/kconfig-frontends/">kconfig-frontends 简介</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>