<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>跑通 p4factory app int | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="p4factory 样例 app int 跑通的过程记录。">
<meta name="keywords" content="p4,int,inband network telemetry,in-band network telemetry,带内遥测,p4factory,demo,ubuntu,16.04,3.19,kernel,linux,webui,success,成功,docker,webui,iperf,failed,网页,失败,vxlan,mininet,CLI,gcc,dockerfile,版本,tshark,ping,connection refuse">
<meta property="og:type" content="article">
<meta property="og:title" content="跑通 p4factory app int">
<meta property="og:url" content="http://yoursite.com/2017/04/18/networks/p4/demo_int/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="p4factory 样例 app int 跑通的过程记录。">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/images/networks/p4/int_demo/run.png">
<meta property="og:image" content="http://yoursite.com/images/networks/p4/int_demo/traffic.png">
<meta property="og:image" content="http://yoursite.com/images/networks/p4/int_demo/webui.png">
<meta property="og:image" content="http://yoursite.com/images/networks/p4/int_demo/multi-flow.png">
<meta property="og:image" content="http://yoursite.com/images/networks/p4/int_demo/latency.png">
<meta property="og:image" content="http://yoursite.com/images/networks/p4/int_demo/notification.png">
<meta property="og:updated_time" content="2019-04-17T09:58:07.071Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="跑通 p4factory app int">
<meta name="twitter:description" content="p4factory 样例 app int 跑通的过程记录。">
<meta name="twitter:image" content="http://yoursite.com/images/networks/p4/int_demo/run.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-networks/p4/demo_int" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/18/networks/p4/demo_int/" class="article-date">
  <time datetime="2017-04-18T08:45:20.000Z" itemprop="datePublished">2017-04-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/p4/">p4</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      跑通 p4factory app int
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p>ubuntu 16.04 + linux kernel 3.19</p>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><p>详见：</p>
<ul>
<li><a href="https://github.com/p4lang/p4factory/tree/master/apps/int" target="_blank" rel="noopener">app/int/readme</a></li>
<li><a href="https://github.com/p4lang/p4factory" target="_blank" rel="noopener">p4factory readme</a></li>
<li><a href="https://github.com/p4lang/switch" target="_blank" rel="noopener">switch readme</a></li>
</ul>
<p>问题 fix 见下文。</p>
<h2 id="运行成功图示"><a href="#运行成功图示" class="headerlink" title="运行成功图示"></a>运行成功图示</h2><ul>
<li>执行 <code>int_ref_topology.py</code></li>
</ul>
<p><img src="/images/networks/p4/int_demo/run.png" alt="执行命令"></p>
<ul>
<li>iperf 打流</li>
</ul>
<p><img src="/images/networks/p4/int_demo/traffic.png" alt="打流"></p>
<ul>
<li>webui - 拓扑</li>
</ul>
<p><img src="/images/networks/p4/int_demo/webui.png" alt="拓扑"></p>
<ul>
<li>webui - flows</li>
</ul>
<p><img src="/images/networks/p4/int_demo/multi-flow.png" alt="multi-flow"></p>
<ul>
<li>webui - 时延</li>
</ul>
<p><img src="/images/networks/p4/int_demo/latency.png" alt="latency"></p>
<ul>
<li>webui - notification</li>
</ul>
<p><img src="/images/networks/p4/int_demo/notification.png" alt="notifcation"></p>
<h2 id="问题解决记录"><a href="#问题解决记录" class="headerlink" title="问题解决记录"></a>问题解决记录</h2><h3 id="内核版本切换为-3-19"><a href="#内核版本切换为-3-19" class="headerlink" title="内核版本切换为 3.19"></a>内核版本切换为 3.19</h3><p>目前 vxlan-gpe 的内核模块基于内核 3.19，而目前常用 Linux 发行版的内核版本都在 4.2 以上，不切换则编译不过。<strong>更好的办法是，直接使用内核版本为 3.19 的 Linux 发行版</strong>。</p>
<p>详见 <a href="https://github.com/p4lang/p4factory/issues/136" target="_blank" rel="noopener">p4factory issue 136</a><br>用于支持内核版本 3.19。详见另一篇文章 <a href="http://sunyongfeng.com/201704/linux/startup_with_old_kernel.html" target="_blank" rel="noopener">ubuntu 用回旧版内核</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/apps/int/vxlan-gpe$ make</span><br><span class="line">make -C /lib/modules/4.4.0-72-generic/build M=/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe modules</span><br><span class="line">make[1]: Entering directory &apos;/usr/src/linux-headers-4.4.0-72-generic&apos;</span><br><span class="line">  CC [M]  /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.o</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:94:7: error: redefinition of ‘union vxlan_addr’</span><br><span class="line"> union vxlan_addr &#123;</span><br><span class="line">       ^</span><br><span class="line">In file included from /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:44:0:</span><br><span class="line">include/net/vxlan.h:119:7: note: originally defined here</span><br><span class="line"> union vxlan_addr &#123;</span><br><span class="line">       ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:100:8: error: redefinition of ‘struct vxlan_rdst’</span><br><span class="line"> struct vxlan_rdst &#123;</span><br><span class="line">        ^</span><br><span class="line">In file included from /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:44:0:</span><br><span class="line">include/net/vxlan.h:125:8: note: originally defined here</span><br><span class="line"> struct vxlan_rdst &#123;</span><br><span class="line">        ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:122:8: error: redefinition of ‘struct vxlan_dev’</span><br><span class="line"> struct vxlan_dev &#123;</span><br><span class="line">        ^</span><br><span class="line">In file included from /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:44:0:</span><br><span class="line">include/net/vxlan.h:152:8: note: originally defined here</span><br><span class="line"> struct vxlan_dev &#123;</span><br><span class="line">        ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c: In function ‘vxlan_fdb_info’:</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:423:9: error: void value not ignored as it ought to be</span><br><span class="line">  return nlmsg_end(skb, nlh);</span><br><span class="line">         ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c: In function ‘vxlan_udp_encap_recv’:</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1255:4: error: ‘struct vxlan_sock’ has no member named ‘rcv’</span><br><span class="line">  vs-&gt;rcv(vs, skb, vxh-&gt;vx_vni);</span><br><span class="line">    ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c: In function ‘vxlan6_xmit_skb’:</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1681:7: error: implicit declaration of function ‘vlan_tx_tag_present’ [-Werror=implicit-function-declaration]</span><br><span class="line">    + (vlan_tx_tag_present(skb) ? VLAN_HLEN : 0);</span><br><span class="line">       ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1708:23: warning:passing argument 1 of ‘udp_tunnel6_xmit_skb’ from incompatible pointer type [-Wincompatible-pointer-types]</span><br><span class="line">  udp_tunnel6_xmit_skb(vs-&gt;sock, dst, skb, dev, saddr, daddr, prio,</span><br><span class="line">                       ^</span><br><span class="line">In file included from /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:37:0:</span><br><span class="line">include/net/udp_tunnel.h:87:5: note: expected ‘struct dst_entry *’ but argument is of type ‘struct socket *’</span><br><span class="line"> int udp_tunnel6_xmit_skb(struct dst_entry *dst, struct sock *sk,</span><br><span class="line">     ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1708:33: warning:passing argument 2 of ‘udp_tunnel6_xmit_skb’ from incompatible pointer type [-Wincompatible-pointer-types]</span><br><span class="line">  udp_tunnel6_xmit_skb(vs-&gt;sock, dst, skb, dev, saddr, daddr, prio,</span><br><span class="line">                                 ^</span><br><span class="line">In file included from /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:37:0:</span><br><span class="line">include/net/udp_tunnel.h:87:5: note: expected ‘struct sock *’ but argument is of type ‘struct dst_entry *’</span><br><span class="line"> int udp_tunnel6_xmit_skb(struct dst_entry *dst, struct sock *sk,</span><br><span class="line">     ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1708:2: error: too few arguments to function ‘udp_tunnel6_xmit_skb’</span><br><span class="line">  udp_tunnel6_xmit_skb(vs-&gt;sock, dst, skb, dev, saddr, daddr, prio,</span><br><span class="line">  ^</span><br><span class="line">In file included from /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:37:0:</span><br><span class="line">include/net/udp_tunnel.h:87:5: note: declared here</span><br><span class="line"> int udp_tunnel6_xmit_skb(struct dst_entry *dst, struct sock *sk,</span><br><span class="line">     ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c: In function ‘vxlan_xmit_skb’:</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1787:29: warning:passing argument 1 of ‘udp_tunnel_xmit_skb’ from incompatible pointer type [-Wincompatible-pointer-types]</span><br><span class="line">  return udp_tunnel_xmit_skb(vs-&gt;sock, rt, skb, src, dst, tos,</span><br><span class="line">                             ^</span><br><span class="line">In file included from /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:37:0:</span><br><span class="line">include/net/udp_tunnel.h:81:5: note: expected ‘struct rtable *’ but argument is of type ‘struct socket *’</span><br><span class="line"> int udp_tunnel_xmit_skb(struct rtable *rt, struct sock *sk, struct sk_buff *skb,</span><br><span class="line">     ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1787:39: warning:passing argument 2 of ‘udp_tunnel_xmit_skb’ from incompatible pointer type [-Wincompatible-pointer-types]</span><br><span class="line">  return udp_tunnel_xmit_skb(vs-&gt;sock, rt, skb, src, dst, tos,</span><br><span class="line">                                       ^</span><br><span class="line">In file included from /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:37:0:</span><br><span class="line">include/net/udp_tunnel.h:81:5: note: expected ‘struct sock *’ but argument is of type ‘struct rtable *’</span><br><span class="line"> int udp_tunnel_xmit_skb(struct rtable *rt, struct sock *sk, struct sk_buff *skb,</span><br><span class="line">     ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1787:9: error: too few arguments to function ‘udp_tunnel_xmit_skb’</span><br><span class="line">  return udp_tunnel_xmit_skb(vs-&gt;sock, rt, skb, src, dst, tos,</span><br><span class="line">         ^</span><br><span class="line">In file included from /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:37:0:</span><br><span class="line">include/net/udp_tunnel.h:81:5: note: declared here</span><br><span class="line"> int udp_tunnel_xmit_skb(struct rtable *rt, struct sock *sk, struct sk_buff *skb,</span><br><span class="line">     ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c: In function ‘vxlan_xmit_one’:</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1941:34: warning:passing argument 1 of ‘ipv6_stub-&gt;ipv6_dst_lookup’ from incompatible pointer type [-Wincompatible-pointer-types]</span><br><span class="line">   if (ipv6_stub-&gt;ipv6_dst_lookup(sk, &amp;ndst, &amp;fl6)) &#123;</span><br><span class="line">                                  ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1941:34: note: expected ‘struct net *’ but argument is of type ‘struct sock *’</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1941:38: warning:passing argument 2 of ‘ipv6_stub-&gt;ipv6_dst_lookup’ from incompatible pointer type [-Wincompatible-pointer-types]</span><br><span class="line">   if (ipv6_stub-&gt;ipv6_dst_lookup(sk, &amp;ndst, &amp;fl6)) &#123;</span><br><span class="line">                                      ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1941:38: note: expected ‘struct sock *’ but argument is of type ‘struct dst_entry **’</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1941:45: warning:passing argument 3 of ‘ipv6_stub-&gt;ipv6_dst_lookup’ from incompatible pointer type [-Wincompatible-pointer-types]</span><br><span class="line">   if (ipv6_stub-&gt;ipv6_dst_lookup(sk, &amp;ndst, &amp;fl6)) &#123;</span><br><span class="line">                                             ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1941:45: note: expected ‘struct dst_entry **’ but argument is of type ‘struct flowi6 *’</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1941:7: error: too few arguments to function ‘ipv6_stub-&gt;ipv6_dst_lookup’</span><br><span class="line">   if (ipv6_stub-&gt;ipv6_dst_lookup(sk, &amp;ndst, &amp;fl6)) &#123;</span><br><span class="line">       ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c: At top level:</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:2468:12: error: unknown type name ‘vxlan_rcv_t’</span><br><span class="line">            vxlan_rcv_t *rcv, void *data,</span><br><span class="line">            ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:2520:7: error: unknown type name ‘vxlan_rcv_t’</span><br><span class="line">       vxlan_rcv_t *rcv, void *data,</span><br><span class="line">       ^</span><br><span class="line">In file included from include/linux/linkage.h:6:0,</span><br><span class="line">                 from include/linux/kernel.h:6,</span><br><span class="line">                 from /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:14:</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:2546:19: error: ‘vxlan_sock_add’ undeclared here (not in a function)</span><br><span class="line"> EXPORT_SYMBOL_GPL(vxlan_sock_add);</span><br><span class="line">                   ^</span><br><span class="line">include/linux/export.h:57:16: note: in definition of macro ‘__EXPORT_SYMBOL’</span><br><span class="line">  extern typeof(sym) sym;     \</span><br><span class="line">                ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:2546:1: note: in expansion of macro ‘EXPORT_SYMBOL_GPL’</span><br><span class="line"> EXPORT_SYMBOL_GPL(vxlan_sock_add);</span><br><span class="line"> ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c: In function ‘vxlan_sock_work’:</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:2557:8: error: called object ‘vxlan_sock_add’ is not a function or function pointer</span><br><span class="line">  nvs = vxlan_sock_add(net, port, vxlan_rcv, NULL, false, vxlan-&gt;flags);</span><br><span class="line">        ^</span><br><span class="line">In file included from include/linux/linkage.h:6:0,</span><br><span class="line">                 from include/linux/kernel.h:6,</span><br><span class="line">                 from /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:14:</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:2546:19: note: declared here</span><br><span class="line"> EXPORT_SYMBOL_GPL(vxlan_sock_add);</span><br><span class="line">                   ^</span><br><span class="line">include/linux/export.h:57:21: note: in definition of macro ‘__EXPORT_SYMBOL’</span><br><span class="line">  extern typeof(sym) sym;     \</span><br><span class="line">                     ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:2546:1: note: in expansion of macro ‘EXPORT_SYMBOL_GPL’</span><br><span class="line"> EXPORT_SYMBOL_GPL(vxlan_sock_add);</span><br><span class="line"> ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c: At top level:</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:604:25: warning: vxlan_gro_receive’ defined but not used [-Wunused-function]</span><br><span class="line"> static struct sk_buff **vxlan_gro_receive(struct sk_buff **head, struct sk_buff *</span><br><span class="line">                         ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:669:12: warning: vxlan_gro_complete’ defined but not used [-Wunused-function]</span><br><span class="line"> static int vxlan_gro_complete(struct sk_buff *skb, int nhoff)</span><br><span class="line">            ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:692:13: warning: vxlan_notify_add_rx_port’ defined but not used [-Wunused-function]</span><br><span class="line"> static void vxlan_notify_add_rx_port(struct vxlan_sock *vs)</span><br><span class="line">             ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1219:12: warning:‘vxlan_udp_encap_recv’ defined but not used [-Wunused-function]</span><br><span class="line"> static int vxlan_udp_encap_recv(struct sock *sk, struct sk_buff *skb)</span><br><span class="line">            ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:2427:13: warning:‘vxlan_del_work’ defined but not used [-Wunused-function]</span><br><span class="line"> static void vxlan_del_work(struct work_struct *work)</span><br><span class="line">             ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:2434:23: warning:‘vxlan_create_sock’ defined but not used [-Wunused-function]</span><br><span class="line"> static struct socket *vxlan_create_sock(struct net *net, bool ipv6,</span><br><span class="line">                       ^</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c: In function ‘vxlan_xmit_skb’:</span><br><span class="line">/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.c:1789:1: warning: control reaches end of non-void function [-Wreturn-type]</span><br><span class="line"> &#125;</span><br><span class="line"> ^</span><br><span class="line">cc1: some warnings being treated as errors</span><br><span class="line">scripts/Makefile.build:264: recipe for target &apos;/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.o&apos; failed</span><br><span class="line">make[2]: *** [/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/vxlan.o] Error 1</span><br><span class="line">Makefile:1420: recipe for target &apos;_module_/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe&apos; failed</span><br><span class="line">make[1]: *** [_module_/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe] Error 2</span><br><span class="line">make[1]: Leaving directory &apos;/usr/src/linux-headers-4.4.0-72-generic&apos;</span><br><span class="line">Makefile:4: recipe for target &apos;all&apos; failed</span><br><span class="line">make: *** [all] Error 2</span><br><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/apps/int/vxlan-gpe$ make clean</span><br><span class="line">make -C /lib/modules/4.4.0-72-generic/build M=/home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe clean</span><br><span class="line">make[1]: Entering directory &apos;/usr/src/linux-headers-4.4.0-72-generic&apos;</span><br><span class="line">  CLEAN   /home/sunyongfeng/workshop/p4factory/apps/int/vxlan-gpe/.tmp_versions</span><br><span class="line">make[1]: Leaving directory &apos;/usr/src/linux-headers-4.4.0-72-generic&apos;</span><br><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/apps/int/vxlan-gpe$</span><br></pre></td></tr></table></figure>
<h3 id="解决-Linux-内核到-3-19-后，docker-无法运行"><a href="#解决-Linux-内核到-3-19-后，docker-无法运行" class="headerlink" title="解决 Linux 内核到 3.19 后，docker 无法运行"></a>解决 Linux 内核到 3.19 后，docker 无法运行</h3><p>详见另一篇文章 <a href="http://sunyongfeng.com/201704/linux/docker_failed_after_update_kernel.html" target="_blank" rel="noopener">Linux升级内核后 docker 不可用</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/makefiles$ sudo service docker start</span><br><span class="line">Job for docker.service failed because the control process exited with error code. See &quot;systemctl status docker.service&quot; and &quot;journalctl -xe&quot; for details.</span><br><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/makefiles$ </span><br><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/makefiles$ sudo systemctl status docker.service</span><br><span class="line">● docker.service - Docker Application Container Engine</span><br><span class="line">   Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: failed (Result: exit-code) since 二 2017-04-18 16:38:26 CST; 9s ago</span><br><span class="line">     Docs: https://docs.docker.com</span><br><span class="line">  Process: 3058 ExecStart=/usr/bin/dockerd -H fd:// (code=exited, status=1/FAILURE)</span><br><span class="line"> Main PID: 3058 (code=exited, status=1/FAILURE)</span><br><span class="line"></span><br><span class="line">4月 18 16:38:25 openswitch-OptiPlex-380 systemd[1]: Starting Docker Application Container Engine...</span><br><span class="line">4月 18 16:38:25 openswitch-OptiPlex-380 dockerd[3058]: time=&quot;2017-04-18T16:38:25.914144290+08:00&quot; level=info msg=&quot;libcontainerd: new containerd process, pid: 3064&quot;</span><br><span class="line">4月 18 16:38:26 openswitch-OptiPlex-380 dockerd[3058]: time=&quot;2017-04-18T16:38:26.962727971+08:00&quot; level=error msg=&quot;[graphdriver] prior storage driver \&quot;aufs\&quot; failed:</span><br><span class="line">4月 18 16:38:26 openswitch-OptiPlex-380 dockerd[3058]: time=&quot;2017-04-18T16:38:26.962806596+08:00&quot; level=fatal msg=&quot;Error starting daemon: error initializing graphdriv</span><br><span class="line">4月 18 16:38:26 openswitch-OptiPlex-380 systemd[1]: docker.service: Main process exited, code=exited, status=1/FAILURE</span><br><span class="line">4月 18 16:38:26 openswitch-OptiPlex-380 systemd[1]: Failed to start Docker Application Container Engine.</span><br><span class="line">4月 18 16:38:26 openswitch-OptiPlex-380 systemd[1]: docker.service: Unit entered failed state.</span><br><span class="line">4月 18 16:38:26 openswitch-OptiPlex-380 systemd[1]: docker.service: Failed with result &apos;exit-code&apos;.</span><br><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/makefiles$ </span><br><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/makefiles$ sudo systemctl start docker</span><br><span class="line">Job for docker.service failed because the control process exited with error code. See &quot;systemctl status docker.service&quot; and &quot;journalctl -xe&quot; for details.</span><br><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/makefiles$ docker --version</span><br><span class="line">Docker version 1.12.3, build 6b644ec</span><br></pre></td></tr></table></figure>
<h3 id="解决-int-ref-topology-py-失败问题"><a href="#解决-int-ref-topology-py-失败问题" class="headerlink" title="解决 int_ref_topology.py 失败问题"></a>解决 int_ref_topology.py 失败问题</h3><h4 id="docker-node-py-运行失败"><a href="#docker-node-py-运行失败" class="headerlink" title="docker_node.py 运行失败"></a>docker_node.py 运行失败</h4><p>详见 <a href="https://github.com/p4lang/p4factory/issues/193" target="_blank" rel="noopener">p4factory issue 193</a></p>
<p>执行 mininet 起 docker 起不来。<a href="http://stackoverflow.com/questions/28006027/valueerror-invalid-literal-for-int-with-base-10-n" target="_blank" rel="noopener">解决</a>:</p>
<blockquote>
<p>replace :</p>
<p><code>start = int(line)</code> </p>
<p>to</p>
<p><code>start = int(line.strip())   # strip will chop the &#39;\n&#39;</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/mininet$ sudo ./int_ref_topology.py --model-dir=$P4HOME/install               </span><br><span class="line">Adding switch spine1</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;./int_ref_topology.py&quot;, line 131, in &lt;module&gt;</span><br><span class="line">    run_cfg(model_dir)</span><br><span class="line">  File &quot;./int_ref_topology.py&quot;, line 91, in run_cfg</span><br><span class="line">    net = mgr.setupAndStartNetwork()</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4factory/mininet/int_cfg.py&quot;, line 140, in setupAndStartNetwork</span><br><span class="line">    self.addSwitches()</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4factory/mininet/int_cfg.py&quot;, line 177, in addSwitches</span><br><span class="line">    pps = s.pps, qdepth = s.qdepth )</span><br><span class="line">  File &quot;/usr/lib/python2.7/dist-packages/mininet/net.py&quot;, line 240, in addSwitch</span><br><span class="line">    sw = cls( name, **defaults )</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4factory/mininet/docker/p4model.py&quot;, line 55, in __init__</span><br><span class="line">    DockerSwitch.__init__( self, name, **kwargs )</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4factory/mininet/docker/docker_node.py&quot;, line 30, in __init__</span><br><span class="line">    Node.__init__( self, name, **kwargs )</span><br><span class="line">  File &quot;/usr/lib/python2.7/dist-packages/mininet/node.py&quot;, line 106, in __init__</span><br><span class="line">    self.startShell()</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4factory/mininet/docker/docker_node.py&quot;, line 119, in startShell</span><br><span class="line">    self.pid = int(ps_out[0])</span><br><span class="line">ValueError: invalid literal for int() with base 10: &quot;&apos;21431&apos;\n&quot;</span><br><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/mininet$</span><br></pre></td></tr></table></figure>
<p>ps_out 的结果 <code>[&quot;&#39;22326&#39;\n&quot;]</code>，因此 L119 应改为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.pid = int((ps_out[0].strip()).strip(&apos;\&apos;&apos;))</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="http://www.runoob.com/python/att-string-strip.html" target="_blank" rel="noopener">链接</a>：Python strip() 方法用于移除字符串头尾指定的字符（默认为空格）。</p>
</blockquote>
<h4 id="解决-docker-内-bmv2-无法运行的问题"><a href="#解决-docker-内-bmv2-无法运行的问题" class="headerlink" title="解决 docker 内 bmv2 无法运行的问题"></a>解决 docker 内 bmv2 无法运行的问题</h4><p>非必需。</p>
<p>原因：ubuntu 16.04 默认 gcc 版为 5.4.0，而 bmv2 docker ubuntu 版本为 14.04，其默认 gcc 为 4.8。因此升级 docker 中的 ubuntu 版本为 16.04</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/mininet$ sudo ./int_ref_topology.py --model-dir=$P4HOME/install               </span><br><span class="line">Adding switch spine1</span><br><span class="line">Adding switch spine2</span><br><span class="line">Adding switch leaf1</span><br><span class="line">Adding switch leaf2</span><br><span class="line"></span><br><span class="line">Waiting 10 seconds for switches to intialize...</span><br><span class="line">INT Config  spine1</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;./int_ref_topology.py&quot;, line 131, in &lt;module&gt;</span><br><span class="line">    run_cfg(model_dir)</span><br><span class="line">  File &quot;./int_ref_topology.py&quot;, line 91, in run_cfg</span><br><span class="line">    net = mgr.setupAndStartNetwork()</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4factory/mininet/int_cfg.py&quot;, line 147, in setupAndStartNetwork</span><br><span class="line">    self.configSwitches()</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4factory/mininet/int_cfg.py&quot;, line 237, in configSwitches</span><br><span class="line">    self.configSwitch(s)</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4factory/mininet/int_cfg.py&quot;, line 251, in configSwitch</span><br><span class="line">    client.switcht_api_init( device )</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4factory/submodules/switch/switchapi/switch_api_thrift/switch_api_rpc.py&quot;, line 1565, in switcht_api_init</span><br><span class="line">    return self.recv_switcht_api_init()</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4factory/submodules/switch/switchapi/switch_api_thrift/switch_api_rpc.py&quot;, line 1577, in recv_switcht_api_init</span><br><span class="line">    (fname, mtype, rseqid) = iprot.readMessageBegin()</span><br><span class="line">  File &quot;/usr/local/lib/python2.7/dist-packages/thrift/protocol/TBinaryProtocol.py&quot;, line 134, in readMessageBegin</span><br><span class="line">    sz = self.readI32()</span><br><span class="line">  File &quot;/usr/local/lib/python2.7/dist-packages/thrift/protocol/TBinaryProtocol.py&quot;, line 217, in readI32</span><br><span class="line">    buff = self.trans.readAll(4)</span><br><span class="line">  File &quot;/usr/local/lib/python2.7/dist-packages/thrift/transport/TTransport.py&quot;, line 60, in readAll</span><br><span class="line">    chunk = self.read(sz - have)</span><br><span class="line">  File &quot;/usr/local/lib/python2.7/dist-packages/thrift/transport/TTransport.py&quot;, line 161, in read</span><br><span class="line">    self.__rbuf = BufferIO(self.__trans.read(max(sz, self.__rbuf_size)))</span><br><span class="line">  File &quot;/usr/local/lib/python2.7/dist-packages/thrift/transport/TSocket.py&quot;, line 117, in read</span><br><span class="line">    buff = self.handle.recv(sz)</span><br><span class="line">socket.error: [Errno 104] Connection reset by peer</span><br><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/mininet$</span><br></pre></td></tr></table></figure>
<p>根本原因为工具链问题，gcc 版本不一致。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/mininet$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS              PORTS                                               NAMES</span><br><span class="line">50b20ec98aac        p4dockerswitch_bmv2   &quot;/bin/sh -c /bin/bash&quot;   47 seconds ago      Up 45 seconds       0.0.0.0:26001-&gt;9091/tcp, 0.0.0.0:27001-&gt;10001/tcp   leaf2</span><br><span class="line">d04a024c559e        p4dockerswitch_bmv2   &quot;/bin/sh -c /bin/bash&quot;   48 seconds ago      Up 46 seconds       0.0.0.0:26000-&gt;9091/tcp, 0.0.0.0:27000-&gt;10001/tcp   leaf1</span><br><span class="line">4678cbfe6b2b        p4dockerswitch_bmv2   &quot;/bin/sh -c /bin/bash&quot;   49 seconds ago      Up 47 seconds       0.0.0.0:26003-&gt;9091/tcp, 0.0.0.0:27003-&gt;10001/tcp   spine2</span><br><span class="line">701da5748dc9        p4dockerswitch_bmv2   &quot;/bin/sh -c /bin/bash&quot;   50 seconds ago      Up 48 seconds       0.0.0.0:26002-&gt;9091/tcp, 0.0.0.0:27002-&gt;10001/tcp   spine1</span><br><span class="line">sunyongfeng@openswitch-OptiPlex-380:~/workshop/p4factory/mininet$ docker attach 701da5748dc9</span><br><span class="line">bin      dev   lib    mnt                   nnpy       proc  sbin  third-party          tmp</span><br><span class="line">boot     etc   lib64  nanomsg-1.0.0         opt        root  srv   thrift-0.9.2         usr</span><br><span class="line">configs  home  media  nanomsg-1.0.0.tar.gz  p4factory  run   sys   thrift-0.9.2.tar.gz  var</span><br><span class="line">bmv2_driver.log  bmv2_model.log  start.sh</span><br><span class="line">cat: /tmp/dmvdr: No such file or directory</span><br><span class="line">bin      dev   lib    mnt                   nnpy       proc  sbin  third-party          tmp</span><br><span class="line">boot     etc   lib64  nanomsg-1.0.0         opt        root  srv   thrift-0.9.2         usr</span><br><span class="line">configs  home  media  nanomsg-1.0.0.tar.gz  p4factory  run   sys   thrift-0.9.2.tar.gz  var</span><br><span class="line">bmv2_driver.log  bmv2_model.log  start.sh</span><br><span class="line">/home/sunyongfeng/workshop/p4/install/bin/bmswitchp4_drivers: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.20&apos; not found (required by /home/sunyongfeng/workshop/p4/install/lib/bmpd/switch/libpd.so.0)</span><br><span class="line">/home/sunyongfeng/workshop/p4/install/bin/bmswitchp4_drivers: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `CXXABI_1.3.8&apos; not found (required by /home/sunyongfeng/workshop/p4/install/lib/bmpd/switch/libpd.so.0)</span><br><span class="line">/home/sunyongfeng/workshop/p4/install/bin/bmswitchp4_drivers: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21&apos; not found (required by /home/sunyongfeng/workshop/p4/install/lib/bmpd/switch/libpd.so.0)</span><br><span class="line">/home/sunyongfeng/workshop/p4/install/bin/bmswitchp4_drivers: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21&apos; not found (required by /home/sunyongfeng/workshop/p4/install/lib/bmpd/switch/libpdthrift.so.0)</span><br><span class="line">/home/sunyongfeng/workshop/p4/install/bin/bmswitchp4_drivers: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21&apos; not found (required by /home/sunyongfeng/workshop/p4/install/lib/libbmpdfixed.so.0)</span><br><span class="line">/home/sunyongfeng/workshop/p4/install/bin/bmswitchp4_drivers: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21&apos; not found (required by /home/sunyongfeng/workshop/p4/install/lib/libbmpdfixedthrift.so.0)</span><br><span class="line">/home/sunyongfeng/workshop/p4/install/bin/bmswitchp4_drivers: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21&apos; not found (required by /home/sunyongfeng/workshop/p4/install/lib/libruntimestubs.so.0)</span><br><span class="line">/home/sunyongfeng/workshop/p4/install/bin/bmswitchp4_drivers: /usr/lib/x86_64-linux-gnu/libstdc++.so.6: version `GLIBCXX_3.4.21&apos; not found (required by /home/sunyongfeng/workshop/p4/install/lib/libsimpleswitch_thrift.so.0)</span><br><span class="line">/home/sunyongfeng/workshop/p4/install/bin/simple_switch: error while loading shared libraries: libboost_system.so.1.58.0: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure>
<p>更新后的 Dockerfile patch:</p>
<figure class="highlight patch"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/docker/Dockerfile b/docker/Dockerfile</span><br><span class="line">old mode 100644</span><br><span class="line">new mode 100755</span><br><span class="line">index 42c87af..e9003fc</span><br><span class="line"><span class="comment">--- a/docker/Dockerfile</span></span><br><span class="line"><span class="comment">+++ b/docker/Dockerfile</span></span><br><span class="line"><span class="meta">@@ -1,4 +1,4 @@</span></span><br><span class="line"><span class="deletion">-FROM      ubuntu:14.04</span></span><br><span class="line"><span class="addition">+FROM      ubuntu:16.04</span></span><br><span class="line"> MAINTAINER Antonin Bas &lt;antonin@barefootnetworks.com&gt;</span><br><span class="line"> </span><br><span class="line"> RUN apt-get update</span><br><span class="line">@@ -41,7 +41,6 @@ RUN apt-get install -y \</span><br><span class="line">     redis-server \</span><br><span class="line">     redis-tools \</span><br><span class="line">     subversion \</span><br><span class="line"><span class="deletion">-    tshark \</span></span><br><span class="line">     xterm</span><br><span class="line"> </span><br><span class="line"> RUN pip install tenjin</span><br><span class="line">@@ -84,7 +83,7 @@ RUN mkdir -p /tmp/install_tmp ; \</span><br><span class="line">     wget -c http://archive.apache.org/dist/thrift/0.9.2/thrift-0.9.2.tar.gz ; \</span><br><span class="line">     tar zxvf thrift-0.9.2.tar.gz ; \</span><br><span class="line">     cd thrift-0.9.2 ; \</span><br><span class="line"><span class="deletion">-    ./configure --with-cpp=yes --with-c_glib=no --with-java=no --with-ruby=no --with-erlang=no --with-go=no --with-nodejs=no ; \</span></span><br><span class="line"><span class="addition">+    ./configure ; \</span></span><br><span class="line">     make -j4 ; \</span><br><span class="line">     make install ; \</span><br><span class="line">     ldconfig ; \</span><br></pre></td></tr></table></figure>
<h4 id="DockerFile-解决-tshark-卡在-yes-no"><a href="#DockerFile-解决-tshark-卡在-yes-no" class="headerlink" title="DockerFile 解决 tshark 卡在 yes/no"></a>DockerFile 解决 tshark 卡在 yes/no</h4><p>DockerFile 的改造，tshark 无法直接配置通过，卡在 yes/no。详见上一小节 Dockerfile，先不安装 tshark，等 bmv2 docker image 打好后，再进去安装、重新 commit docker image。</p>
<h4 id="在-docker-内使用-simple-switch-CLI"><a href="#在-docker-内使用-simple-switch-CLI" class="headerlink" title="在 docker 内使用 simple_switch_CLI"></a>在 docker 内使用 simple_switch_CLI</h4><p>非必需，仅用于确认表项是否正常下发。</p>
<p>leaf/spine docker 内无法使用 simple_switch_CLI：</p>
<ul>
<li>改 Dockerfile 的 thrift 配置为默认配置，不简化 docker 内的 thrift</li>
<li>在 docker 内通过 pip 安装 thrift，<code>pip install --upgrade thrift</code></li>
<li>通过命令访问 simple_switch_CLI，<code>/home/sunyongfeng/workshop/p4/install/bin/simple_switch_CLI --json /home/sunyongfeng/workshop/p4/install/share/bmpd/switch/switch.json --thrift-port 10001</code></li>
</ul>
<p>没有安装好 thrift 的问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@leaf1:/home/sunyongfeng# /home/sunyongfeng/workshop/p4/install/bin/simple_switch_CLI</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4/install/bin/simple_switch_CLI&quot;, line 30, in &lt;module&gt;</span><br><span class="line">    import sswitch_CLI</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4/install/lib/python2.7/site-packages/sswitch_CLI.py&quot;, line 23, in &lt;module&gt;</span><br><span class="line">    import runtime_CLI</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4/install/lib/python2.7/site-packages/runtime_CLI.py&quot;, line 30, in &lt;module&gt;</span><br><span class="line">    import bmpy_utils as utils</span><br><span class="line">  File &quot;/home/sunyongfeng/workshop/p4/install/lib/python2.7/site-packages/bmpy_utils.py&quot;, line 30, in &lt;module&gt;</span><br><span class="line">    from thrift.protocol import TMultiplexedProtocol</span><br><span class="line">ImportError: cannot import name TMultiplexedProtocol</span><br></pre></td></tr></table></figure>
<p>一开始不知道 simple_switch thrift 开放的端口是多少，通过 netstat -anp 确认为 10001。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">root@leaf1:/# /home/sunyongfeng/workshop/p4/install/bin/simple_switch_CLI --json /home/sunyongfeng/workshop/p4/install/share/bmpd/switch/switch.json </span><br><span class="line">Error when requesting config md5 sum from switch</span><br><span class="line">root@leaf1:/# netstat -anp                                                  </span><br><span class="line">Active Internet connections (servers and established)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 0.0.0.0:9090            0.0.0.0:*               LISTEN      81/bmswitchp4_drive</span><br><span class="line">tcp        0      0 0.0.0.0:9091            0.0.0.0:*               LISTEN      81/bmswitchp4_drive</span><br><span class="line">tcp        0      0 0.0.0.0:9092            0.0.0.0:*               LISTEN      81/bmswitchp4_drive</span><br><span class="line">tcp        0      0 127.0.0.1:2601          0.0.0.0:*               LISTEN      114/zebra       </span><br><span class="line">tcp        0      0 127.0.0.1:2605          0.0.0.0:*               LISTEN      118/bgpd        </span><br><span class="line">tcp        0      0 0.0.0.0:10001           0.0.0.0:*               LISTEN      67/simple_switch</span><br><span class="line">tcp        0      0 0.0.0.0:179             0.0.0.0:*               LISTEN      118/bgpd        </span><br><span class="line">tcp        0      0 127.0.0.1:10001         127.0.0.1:40983         ESTABLISHED 67/simple_switch</span><br><span class="line">tcp        0      0 127.0.0.1:40984         127.0.0.1:10001         ESTABLISHED 81/bmswitchp4_drive</span><br><span class="line">tcp        0      0 127.0.0.1:10001         127.0.0.1:40985         ESTABLISHED 67/simple_switch</span><br><span class="line">tcp        0      0 127.0.0.1:10001         127.0.0.1:40984         ESTABLISHED 67/simple_switch</span><br><span class="line">tcp        0      0 127.0.0.1:40983         127.0.0.1:10001         ESTABLISHED 81/bmswitchp4_drive</span><br><span class="line">tcp        0      0 127.0.0.1:9090          127.0.0.1:46833         TIME_WAIT   -               </span><br><span class="line">tcp        0      0 127.0.0.1:40985         127.0.0.1:10001         ESTABLISHED 81/bmswitchp4_drive</span><br><span class="line">tcp        0      0 127.0.0.1:9090          127.0.0.1:46829         TIME_WAIT   -               </span><br><span class="line">tcp6       0      0 :::179                  :::*                    LISTEN      118/bgpd        </span><br><span class="line">raw6       0      0 :::58                   :::*                    7           114/zebra       </span><br><span class="line">Active UNIX domain sockets (servers and established)</span><br><span class="line">Proto RefCnt Flags       Type       State         I-Node   PID/Program name    Path</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING     576586   118/bgpd            /var/run/quagga/bgpd.vty</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING     575606   114/zebra           /var/run/quagga/zserv.api</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING     575609   114/zebra           /var/run/quagga/zebra.vty</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING     574079   67/simple_switch    /tmp/bmv2-0-notifications.ipc</span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     574211   81/bmswitchp4_drive </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     575248   67/simple_switch    </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     576590   118/bgpd            </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     574212   81/bmswitchp4_drive </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     574218   67/simple_switch    /tmp/bmv2-0-notifications.ipc</span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     575295   81/bmswitchp4_drive </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     575841   123/watchquagga     </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     575271   81/bmswitchp4_drive </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     576591   114/zebra           /var/run/quagga/zserv.api</span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     576807   118/bgpd            /var/run/quagga/bgpd.vty</span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     578621   114/zebra           /var/run/quagga/zebra.vty</span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     575296   81/bmswitchp4_drive </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     576589   114/zebra           /var/run/quagga/zserv.api</span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     576588   118/bgpd            </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     575247   67/simple_switch    </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     574344   81/bmswitchp4_drive </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     574345   81/bmswitchp4_drive </span><br><span class="line">unix  3      [ ]         STREAM     CONNECTED     578620   123/watchquagga     </span><br><span class="line">root@leaf1:/# /home/sunyongfeng/workshop/p4/install/bin/simple_switch_CLI --json /home/sunyongfeng/workshop/p4/install/share/bmpd/switch/switch.json --thrift-port 10001</span><br><span class="line">Control utility for runtime P4 table manipulation</span><br><span class="line">RuntimeCmd:</span><br></pre></td></tr></table></figure>
<p>查看 <code>ipv4_fib</code> 和 <code>ipv4_fib_lpm</code> 表，确认表项安装 OK。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br></pre></td><td class="code"><pre><span class="line">RuntimeCmd: show_tables</span><br><span class="line">acl_stats                      [implementation=None, mk=]</span><br><span class="line">adjust_lkp_fields              [implementation=None, mk=ipv4_valid(valid, 1),   ipv6_valid(valid, 1)]</span><br><span class="line">bd_flood                       [implementation=None, mk=ingress_metadata.bd(exact, 16), l2_metadata.lkp_pkt_type(exact, 3)]</span><br><span class="line">compute_ipv4_hashes            [implementation=None, mk=ingress_metadata.drop_flag(exact, 1)]</span><br><span class="line">compute_ipv6_hashes            [implementation=None, mk=ingress_metadata.drop_flag(exact, 1)]</span><br><span class="line">compute_non_ip_hashes          [implementation=None, mk=ingress_metadata.drop_flag(exact, 1)]</span><br><span class="line">compute_other_hashes           [implementation=None, mk=hash_metadata.hash1(exact, 16)]</span><br><span class="line">dmac                           [implementation=None, mk=ingress_metadata.bd(exact, 16), l2_metadata.lkp_mac_da(exact, 48)]</span><br><span class="line">drop_stats                     [implementation=None, mk=]</span><br><span class="line">ecmp_group                     [implementation=ecmp_action_profile, mk=l3_metadata.nexthop_index(exact, 16)]</span><br><span class="line">egress_bd_map                  [implementation=None, mk=egress_metadata.bd(exact, 16)]</span><br><span class="line">egress_bd_stats                [implementation=None, mk=egress_metadata.bd(exact, 16),  l2_metadata.lkp_pkt_type(exact, 3)]</span><br><span class="line">egress_filter                  [implementation=None, mk=]</span><br><span class="line">egress_filter_drop             [implementation=None, mk=]</span><br><span class="line">egress_ip_acl                  [implementation=None, mk=acl_metadata.egress_if_label(ternary, 16),      acl_metadata.egress_bd_label(ternary, 16),      ipv4.srcAddr(ternary, 32),   ipv4.dstAddr(ternary, 32),      ipv4.protocol(ternary, 8),      acl_metadata.egress_src_port_range_id(exact, 8),        acl_metadata.egress_dst_port_range_id(exact, 8)]</span><br><span class="line">egress_ipv6_acl                [implementation=None, mk=acl_metadata.egress_if_label(ternary, 16),      acl_metadata.egress_bd_label(ternary, 16),      ipv6.srcAddr(ternary, 128),  ipv6.dstAddr(ternary, 128),     ipv6.nextHdr(ternary, 8),       acl_metadata.egress_src_port_range_id(exact, 8),        acl_metadata.egress_dst_port_range_id(exact, 8)]</span><br><span class="line">egress_l4_dst_port             [implementation=None, mk=l3_metadata.egress_l4_dport(range, 16)]</span><br><span class="line">egress_l4_src_port             [implementation=None, mk=l3_metadata.egress_l4_sport(range, 16)]</span><br><span class="line">egress_l4port_fields           [implementation=None, mk=tcp_valid(valid, 1),    udp_valid(valid, 1),    icmp_valid(valid, 1)]</span><br><span class="line">egress_mac_acl                 [implementation=None, mk=acl_metadata.egress_if_label(ternary, 16),      acl_metadata.egress_bd_label(ternary, 16),      ethernet.srcAddr(ternary, 48),       ethernet.dstAddr(ternary, 48),  ethernet.etherType(ternary, 16)]</span><br><span class="line">egress_nat                     [implementation=None, mk=nat_metadata.nat_rewrite_index(exact, 14)]</span><br><span class="line">egress_port_mapping            [implementation=None, mk=standard_metadata.egress_port(exact, 9)]</span><br><span class="line">egress_qos_map                 [implementation=None, mk=qos_metadata.egress_qos_group(ternary, 5),      qos_metadata.lkp_tc(ternary, 8)]</span><br><span class="line">egress_system_acl              [implementation=None, mk=fabric_metadata.reason_code(ternary, 16),       standard_metadata.egress_port(ternary, 9),      intrinsic_metadata.deflection_flag(ternary, 1),      l3_metadata.l3_mtu_check(ternary, 16),  acl_metadata.acl_deny(ternary, 1)]</span><br><span class="line">egress_vlan_xlate              [implementation=None, mk=egress_metadata.ifindex(exact, 16),     egress_metadata.bd(exact, 16)]</span><br><span class="line">egress_vni                     [implementation=None, mk=egress_metadata.bd(exact, 16),  tunnel_metadata.egress_tunnel_type(exact, 5)]</span><br><span class="line">fabric_ingress_dst_lkp         [implementation=None, mk=fabric_header.dstDevice(exact, 8)]</span><br><span class="line">fabric_ingress_src_lkp         [implementation=None, mk=fabric_header_multicast.ingressIfindex(exact, 16)]</span><br><span class="line">fabric_lag                     [implementation=fabric_lag_action_profile, mk=fabric_metadata.dst_device(exact, 8)]</span><br><span class="line">fwd_result                     [implementation=None, mk=l2_metadata.l2_redirect(ternary, 1),    acl_metadata.acl_redirect(ternary, 1),  acl_metadata.racl_redirect(ternary, 1),      l3_metadata.rmac_hit(ternary, 1),       l3_metadata.fib_hit(ternary, 1),        nat_metadata.nat_hit(ternary, 1),       l2_metadata.lkp_pkt_type(ternary, 3),        l3_metadata.lkp_ip_type(ternary, 2),    multicast_metadata.igmp_snooping_enabled(ternary, 1),   multicast_metadata.mld_snooping_enabled(ternary, 1),multicast_metadata.mcast_route_hit(ternary, 1),  multicast_metadata.mcast_bridge_hit(ternary, 1),        multicast_metadata.mcast_rpf_group(ternary, 16),        multicast_metadata.mcast_mode(ternary, 2)]</span><br><span class="line">ingress_bd_stats               [implementation=None, mk=]</span><br><span class="line">ingress_l4_dst_port            [implementation=None, mk=l3_metadata.lkp_l4_dport(range, 16)]</span><br><span class="line">ingress_l4_src_port            [implementation=None, mk=l3_metadata.lkp_l4_sport(range, 16)]</span><br><span class="line">ingress_port_mapping           [implementation=None, mk=standard_metadata.ingress_port(exact, 9)]</span><br><span class="line">ingress_port_properties        [implementation=None, mk=standard_metadata.ingress_port(exact, 9)]</span><br><span class="line">ingress_qos_map_dscp           [implementation=None, mk=qos_metadata.ingress_qos_group(ternary, 5),     l3_metadata.lkp_dscp(ternary, 8)]</span><br><span class="line">ingress_qos_map_pcp            [implementation=None, mk=qos_metadata.ingress_qos_group(ternary, 5),     l2_metadata.lkp_pcp(ternary, 3)]</span><br><span class="line">int_bos                        [implementation=None, mk=int_header.total_hop_cnt(ternary, 8),   int_header.instruction_mask_0003(ternary, 4),   int_header.instruction_mask_0407(ternary, 4),        int_header.instruction_mask_0811(ternary, 4),   int_header.instruction_mask_1215(ternary, 4)]</span><br><span class="line">int_insert                     [implementation=None, mk=int_metadata_i2e.source(ternary, 1),    int_metadata_i2e.sink(ternary, 1),      int_header_valid(valid, 1)]</span><br><span class="line">int_inst_0003                  [implementation=None, mk=int_header.instruction_mask_0003(exact, 4)]</span><br><span class="line">int_inst_0407                  [implementation=None, mk=int_header.instruction_mask_0407(exact, 4)]</span><br><span class="line">int_inst_0811                  [implementation=None, mk=int_header.instruction_mask_0811(exact, 4)]</span><br><span class="line">int_inst_1215                  [implementation=None, mk=int_header.instruction_mask_1215(exact, 4)]</span><br><span class="line">int_meta_header_update         [implementation=None, mk=int_metadata.insert_cnt(ternary, 8)]</span><br><span class="line">int_outer_encap                [implementation=None, mk=ipv4_valid(valid, 1),   vxlan_gpe_valid(valid, 1),      int_metadata_i2e.source(exact, 1),      tunnel_metadata.egress_tunnel_type(ternary, 5)]</span><br><span class="line">int_sink_update_outer          [implementation=None, mk=vxlan_gpe_int_header_valid(valid, 1),   ipv4_valid(valid, 1),   int_metadata_i2e.sink(exact, 1)]</span><br><span class="line">int_source                     [implementation=None, mk=int_header_valid(valid, 1),     ipv4_valid(valid, 1),   ipv4_metadata.lkp_ipv4_da(ternary, 32), ipv4_metadata.lkp_ipv4_sa(ternary, 32),      inner_ipv4_valid(valid, 1),     inner_ipv4.dstAddr(ternary, 32),        inner_ipv4.srcAddr(ternary, 32)]</span><br><span class="line">int_terminate                  [implementation=None, mk=int_header_valid(valid, 1),     vxlan_gpe_int_header_valid(valid, 1),   ipv4_valid(valid, 1),   ipv4_metadata.lkp_ipv4_da(ternary, 32),      inner_ipv4_valid(valid, 1),     inner_ipv4.dstAddr(ternary, 32)]</span><br><span class="line">ip_acl                         [implementation=None, mk=acl_metadata.if_label(ternary, 16),     acl_metadata.bd_label(ternary, 16),     ipv4_metadata.lkp_ipv4_sa(ternary, 32),      ipv4_metadata.lkp_ipv4_da(ternary, 32), l3_metadata.lkp_ip_proto(ternary, 8),   acl_metadata.ingress_src_port_range_id(exact, 8),       acl_metadata.ingress_dst_port_range_id(exact, 8),    tcp.flags(ternary, 8),  l3_metadata.lkp_ip_ttl(ternary, 8)]</span><br><span class="line">ipsg                           [implementation=None, mk=ingress_metadata.ifindex(exact, 16),    ingress_metadata.bd(exact, 16), l2_metadata.lkp_mac_sa(exact, 48),  ipv4_metadata.lkp_ipv4_sa(exact, 32)]</span><br><span class="line">ipsg_permit_special            [implementation=None, mk=l3_metadata.lkp_ip_proto(ternary, 8),   l3_metadata.lkp_l4_dport(ternary, 16),  ipv4_metadata.lkp_ipv4_da(ternary, 32)]</span><br><span class="line">ipv4_dest_vtep                 [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv4.dstAddr(exact, 32),        tunnel_metadata.ingress_tunnel_type(exact, 5)]</span><br><span class="line">ipv4_fib                       [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv4_metadata.lkp_ipv4_da(exact, 32)]</span><br><span class="line">ipv4_fib_lpm                   [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv4_metadata.lkp_ipv4_da(lpm, 32)]</span><br><span class="line">ipv4_multicast_bridge          [implementation=None, mk=ingress_metadata.bd(exact, 16), ipv4_metadata.lkp_ipv4_sa(exact, 32),   ipv4_metadata.lkp_ipv4_da(exact, 32)]</span><br><span class="line">ipv4_multicast_bridge_star_g   [implementation=None, mk=ingress_metadata.bd(exact, 16), ipv4_metadata.lkp_ipv4_da(exact, 32)]</span><br><span class="line">ipv4_multicast_route           [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv4_metadata.lkp_ipv4_sa(exact, 32),   ipv4_metadata.lkp_ipv4_da(exact, 32)]</span><br><span class="line">ipv4_multicast_route_star_g    [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv4_metadata.lkp_ipv4_da(exact, 32)]</span><br><span class="line">ipv4_racl                      [implementation=None, mk=acl_metadata.bd_label(ternary, 16),     ipv4_metadata.lkp_ipv4_sa(ternary, 32), ipv4_metadata.lkp_ipv4_da(ternary, 32),      l3_metadata.lkp_ip_proto(ternary, 8),   acl_metadata.ingress_src_port_range_id(exact, 8),       acl_metadata.ingress_dst_port_range_id(exact, 8)]</span><br><span class="line">ipv4_src_vtep                  [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv4.srcAddr(exact, 32),        tunnel_metadata.ingress_tunnel_type(exact, 5)]</span><br><span class="line">ipv4_urpf                      [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv4_metadata.lkp_ipv4_sa(exact, 32)]</span><br><span class="line">ipv4_urpf_lpm                  [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv4_metadata.lkp_ipv4_sa(lpm, 32)]</span><br><span class="line">ipv6_acl                       [implementation=None, mk=acl_metadata.if_label(ternary, 16),     acl_metadata.bd_label(ternary, 16),     ipv6_metadata.lkp_ipv6_sa(ternary, 128),     ipv6_metadata.lkp_ipv6_da(ternary, 128),        l3_metadata.lkp_ip_proto(ternary, 8),   acl_metadata.ingress_src_port_range_id(exact, 8),       acl_metadata.ingress_dst_port_range_id(exact, 8),    tcp.flags(ternary, 8),  l3_metadata.lkp_ip_ttl(ternary, 8)]</span><br><span class="line">ipv6_dest_vtep                 [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv6.dstAddr(exact, 128),       tunnel_metadata.ingress_tunnel_type(exact, 5)]</span><br><span class="line">ipv6_fib                       [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv6_metadata.lkp_ipv6_da(exact, 128)]</span><br><span class="line">ipv6_fib_lpm                   [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv6_metadata.lkp_ipv6_da(lpm, 128)]</span><br><span class="line">ipv6_multicast_bridge          [implementation=None, mk=ingress_metadata.bd(exact, 16), ipv6_metadata.lkp_ipv6_sa(exact, 128),  ipv6_metadata.lkp_ipv6_da(exact, 128)]</span><br><span class="line">ipv6_multicast_bridge_star_g   [implementation=None, mk=ingress_metadata.bd(exact, 16), ipv6_metadata.lkp_ipv6_da(exact, 128)]</span><br><span class="line">ipv6_multicast_route           [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv6_metadata.lkp_ipv6_sa(exact, 128),  ipv6_metadata.lkp_ipv6_da(exact, 128)]</span><br><span class="line">ipv6_multicast_route_star_g    [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv6_metadata.lkp_ipv6_da(exact, 128)]</span><br><span class="line">ipv6_racl                      [implementation=None, mk=acl_metadata.bd_label(ternary, 16),     ipv6_metadata.lkp_ipv6_sa(ternary, 128),        ipv6_metadata.lkp_ipv6_da(ternary, 128),     l3_metadata.lkp_ip_proto(ternary, 8),   acl_metadata.ingress_src_port_range_id(exact, 8),       acl_metadata.ingress_dst_port_range_id(exact, 8)]</span><br><span class="line">ipv6_src_vtep                  [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv6.srcAddr(exact, 128),       tunnel_metadata.ingress_tunnel_type(exact, 5)]</span><br><span class="line">ipv6_urpf                      [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv6_metadata.lkp_ipv6_sa(exact, 128)]</span><br><span class="line">ipv6_urpf_lpm                  [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv6_metadata.lkp_ipv6_sa(lpm, 128)]</span><br><span class="line">l3_rewrite                     [implementation=None, mk=ipv4_valid(valid, 1),   ipv6_valid(valid, 1),   mpls[0]_valid(valid, 1),        ipv4.dstAddr(ternary, 32),  ipv6.dstAddr(ternary, 128)]</span><br><span class="line">lag_group                      [implementation=lag_action_profile, mk=ingress_metadata.egress_ifindex(exact, 16)]</span><br><span class="line">learn_notify                   [implementation=None, mk=l2_metadata.l2_src_miss(ternary, 1),    l2_metadata.l2_src_move(ternary, 16),   l2_metadata.stp_state(ternary, 3)]</span><br><span class="line">mac_acl                        [implementation=None, mk=acl_metadata.if_label(ternary, 16),     acl_metadata.bd_label(ternary, 16),     l2_metadata.lkp_mac_sa(ternary, 48), l2_metadata.lkp_mac_da(ternary, 48),    l2_metadata.lkp_mac_type(ternary, 16)]</span><br><span class="line">meter_action                   [implementation=None, mk=meter_metadata.packet_color(exact, 2),  meter_metadata.meter_index(exact, 16)]</span><br><span class="line">meter_index                    [implementation=None, mk=meter_metadata.meter_index(exact, 16)]</span><br><span class="line">mirror                         [implementation=None, mk=i2e_metadata.mirror_session_id(exact, 16)]</span><br><span class="line">mpls                           [implementation=None, mk=tunnel_metadata.mpls_label(exact, 20),  inner_ipv4_valid(valid, 1),     inner_ipv6_valid(valid, 1)]</span><br><span class="line">mtu                            [implementation=None, mk=l3_metadata.mtu_index(exact, 8),        ipv4_valid(valid, 1),   ipv6_valid(valid, 1)]</span><br><span class="line">nat_dst                        [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv4_metadata.lkp_ipv4_da(exact, 32),   l3_metadata.lkp_ip_proto(exact, 8), l3_metadata.lkp_l4_dport(exact, 16)]</span><br><span class="line">nat_flow                       [implementation=None, mk=l3_metadata.vrf(ternary, 16),   ipv4_metadata.lkp_ipv4_sa(ternary, 32), ipv4_metadata.lkp_ipv4_da(ternary, 32),      l3_metadata.lkp_ip_proto(ternary, 8),   l3_metadata.lkp_l4_sport(ternary, 16),  l3_metadata.lkp_l4_dport(ternary, 16)]</span><br><span class="line">nat_src                        [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv4_metadata.lkp_ipv4_sa(exact, 32),   l3_metadata.lkp_ip_proto(exact, 8), l3_metadata.lkp_l4_sport(exact, 16)]</span><br><span class="line">nat_twice                      [implementation=None, mk=l3_metadata.vrf(exact, 16),     ipv4_metadata.lkp_ipv4_sa(exact, 32),   ipv4_metadata.lkp_ipv4_da(exact, 32)l3_metadata.lkp_ip_proto(exact, 8),      l3_metadata.lkp_l4_sport(exact, 16),    l3_metadata.lkp_l4_dport(exact, 16)]</span><br><span class="line">native_packet_over_fabric      [implementation=None, mk=ipv4_valid(valid, 1),   ipv6_valid(valid, 1)]</span><br><span class="line">nexthop                        [implementation=None, mk=l3_metadata.nexthop_index(exact, 16)]</span><br><span class="line">outer_ipv4_multicast           [implementation=None, mk=multicast_metadata.ipv4_mcast_key_type(exact, 1),       multicast_metadata.ipv4_mcast_key(exact, 16),   ipv4.srcAddr(exact, 32),     ipv4.dstAddr(exact, 32)]</span><br><span class="line">outer_ipv4_multicast_star_g    [implementation=None, mk=multicast_metadata.ipv4_mcast_key_type(exact, 1),       multicast_metadata.ipv4_mcast_key(exact, 16),   ipv4.dstAddr(ternary, 32)]</span><br><span class="line">outer_ipv6_multicast           [implementation=None, mk=multicast_metadata.ipv6_mcast_key_type(exact, 1),       multicast_metadata.ipv6_mcast_key(exact, 16),   ipv6.srcAddr(exact, 128),    ipv6.dstAddr(exact, 128)]</span><br><span class="line">outer_ipv6_multicast_star_g    [implementation=None, mk=multicast_metadata.ipv6_mcast_key_type(exact, 1),       multicast_metadata.ipv6_mcast_key(exact, 16),   ipv6.dstAddr(ternary, 128)]</span><br><span class="line">outer_rmac                     [implementation=None, mk=l3_metadata.rmac_group(exact, 10),      ethernet.dstAddr(exact, 48)]</span><br><span class="line">port_vlan_mapping              [implementation=bd_action_profile, mk=ingress_metadata.ifindex(exact, 16),       vlan_tag_[0]_valid(valid, 1),   vlan_tag_[0].vid(exact, 12), vlan_tag_[1]_valid(valid, 1),   vlan_tag_[1].vid(exact, 12)]</span><br><span class="line">replica_type                   [implementation=None, mk=multicast_metadata.replica(exact, 1),   egress_metadata.same_bd_check(ternary, 16)]</span><br><span class="line">rewrite                        [implementation=None, mk=l3_metadata.nexthop_index(exact, 16)]</span><br><span class="line">rewrite_multicast              [implementation=None, mk=ipv4_valid(valid, 1),   ipv6_valid(valid, 1),   ipv4.dstAddr(ternary, 32),      ipv6.dstAddr(ternary, 128)]</span><br><span class="line">rid                            [implementation=None, mk=intrinsic_metadata.egress_rid(exact, 16)]</span><br><span class="line">rmac                           [implementation=None, mk=l3_metadata.rmac_group(exact, 10),      l2_metadata.lkp_mac_da(exact, 48)]</span><br><span class="line">sflow_ing_take_sample          [implementation=None, mk=ingress_metadata.sflow_take_sample(ternary, 32),        sflow_metadata.sflow_session_id(exact, 16)]</span><br><span class="line">sflow_ingress                  [implementation=None, mk=ingress_metadata.ifindex(ternary, 16),  ipv4_metadata.lkp_ipv4_sa(ternary, 32), ipv4_metadata.lkp_ipv4_da(ternary, 32),      sflow_valid(valid, 1)]</span><br><span class="line">smac                           [implementation=None, mk=ingress_metadata.bd(exact, 16), l2_metadata.lkp_mac_sa(exact, 48)]</span><br><span class="line">smac_rewrite                   [implementation=None, mk=egress_metadata.smac_idx(exact, 9)]</span><br><span class="line">spanning_tree                  [implementation=None, mk=ingress_metadata.ifindex(exact, 16),    l2_metadata.stp_group(exact, 10)]</span><br><span class="line">storm_control                  [implementation=None, mk=standard_metadata.ingress_port(exact, 9),       l2_metadata.lkp_pkt_type(ternary, 3)]</span><br><span class="line">storm_control_stats            [implementation=None, mk=meter_metadata.packet_color(exact, 2),  standard_metadata.ingress_port(exact, 9)]</span><br><span class="line">switch_config_params           [implementation=None, mk=]</span><br><span class="line">system_acl                     [implementation=None, mk=acl_metadata.if_label(ternary, 16),     acl_metadata.bd_label(ternary, 16),     ingress_metadata.ifindex(ternary, 16),       l2_metadata.lkp_mac_type(ternary, 16),  l2_metadata.port_vlan_mapping_miss(ternary, 1), security_metadata.ipsg_check_fail(ternary, 1),  acl_metadata.acl_deny(ternary, 1),   acl_metadata.racl_deny(ternary, 1),     l3_metadata.urpf_check_fail(ternary, 1),        ingress_metadata.drop_flag(ternary, 1), l3_metadata.l3_copy(ternary, 1),     l3_metadata.rmac_hit(ternary, 1),       l3_metadata.routed(ternary, 1), ipv6_metadata.ipv6_src_is_link_local(ternary, 1),       l2_metadata.same_if_check(ternary, 16),      tunnel_metadata.tunnel_if_check(ternary, 1),    l3_metadata.same_bd_check(ternary, 16), l3_metadata.lkp_ip_ttl(ternary, 8),     l2_metadata.stp_state(ternary, 3),   ingress_metadata.control_frame(ternary, 1),     ipv4_metadata.ipv4_unicast_enabled(ternary, 1), ipv6_metadata.ipv6_unicast_enabled(ternary, 1),      ingress_metadata.egress_ifindex(ternary, 16),   fabric_metadata.reason_code(ternary, 16)]</span><br><span class="line">traffic_class                  [implementation=None, mk=qos_metadata.tc_qos_group(ternary, 5),  qos_metadata.lkp_tc(ternary, 8)]</span><br><span class="line">tunnel                         [implementation=None, mk=tunnel_metadata.tunnel_vni(exact, 24),  tunnel_metadata.ingress_tunnel_type(exact, 5),  inner_ipv4_valid(valid, 1),  inner_ipv6_valid(valid, 1)]</span><br><span class="line">tunnel_decap_process_inner     [implementation=None, mk=inner_tcp_valid(valid, 1),      inner_udp_valid(valid, 1),      inner_icmp_valid(valid, 1)]</span><br><span class="line">tunnel_decap_process_outer     [implementation=None, mk=tunnel_metadata.ingress_tunnel_type(exact, 5),  inner_ipv4_valid(valid, 1),     inner_ipv6_valid(valid, 1)]</span><br><span class="line">tunnel_dmac_rewrite            [implementation=None, mk=tunnel_metadata.tunnel_dmac_index(exact, 14)]</span><br><span class="line">tunnel_dst_rewrite             [implementation=None, mk=tunnel_metadata.tunnel_dst_index(exact, 14)]</span><br><span class="line">tunnel_encap_process_inner     [implementation=None, mk=ipv4_valid(valid, 1),   ipv6_valid(valid, 1),   tcp_valid(valid, 1),    udp_valid(valid, 1),    icmp_valid(valid, 1)]</span><br><span class="line">tunnel_encap_process_outer     [implementation=None, mk=tunnel_metadata.egress_tunnel_type(exact, 5),   tunnel_metadata.egress_header_count(exact, 4),  multicast_metadata.replica(exact, 1)]</span><br><span class="line">tunnel_lookup_miss             [implementation=None, mk=ipv4_valid(valid, 1),   ipv6_valid(valid, 1)]</span><br><span class="line">tunnel_mtu                     [implementation=None, mk=tunnel_metadata.tunnel_index(exact, 14)]</span><br><span class="line">tunnel_rewrite                 [implementation=None, mk=tunnel_metadata.tunnel_index(exact, 14)]</span><br><span class="line">tunnel_smac_rewrite            [implementation=None, mk=tunnel_metadata.tunnel_smac_index(exact, 9)]</span><br><span class="line">tunnel_src_rewrite             [implementation=None, mk=tunnel_metadata.tunnel_src_index(exact, 9)]</span><br><span class="line">urpf_bd                        [implementation=None, mk=l3_metadata.urpf_bd_group(exact, 16),   ingress_metadata.bd(exact, 16)]</span><br><span class="line">validate_mpls_packet           [implementation=None, mk=mpls[0].label(ternary, 20),     mpls[0].bos(ternary, 1),        mpls[0]_valid(valid, 1),        mpls[1].label(ternary, 20),  mpls[1].bos(ternary, 1),        mpls[1]_valid(valid, 1),        mpls[2].label(ternary, 20),     mpls[2].bos(ternary, 1),        mpls[2]_valid(valid, 1)]</span><br><span class="line">validate_outer_ethernet        [implementation=None, mk=ethernet.srcAddr(ternary, 48),  ethernet.dstAddr(ternary, 48),  vlan_tag_[0]_valid(valid, 1),   vlan_tag_[1]_valid(valid, 1)]</span><br><span class="line">validate_outer_ipv4_packet     [implementation=None, mk=ipv4.version(ternary, 4),       ipv4.ttl(ternary, 8),   ipv4.srcAddr(ternary, 32)]</span><br><span class="line">validate_outer_ipv6_packet     [implementation=None, mk=ipv6.version(ternary, 4),       ipv6.hopLimit(ternary, 8),      ipv6.srcAddr(ternary, 128)]</span><br><span class="line">validate_packet                [implementation=None, mk=l2_metadata.lkp_mac_sa(ternary, 48),    l2_metadata.lkp_mac_da(ternary, 48),    l3_metadata.lkp_ip_type(ternary, 2), l3_metadata.lkp_ip_ttl(ternary, 8),     l3_metadata.lkp_ip_version(ternary, 4), ipv4_metadata.lkp_ipv4_sa(ternary, 32), ipv6_metadata.lkp_ipv6_sa(ternary, 128)]</span><br><span class="line">vlan_decap                     [implementation=None, mk=vlan_tag_[0]_valid(valid, 1),   vlan_tag_[1]_valid(valid, 1)]</span><br><span class="line">RuntimeCmd: table_dump ipv4_fib</span><br><span class="line">==========</span><br><span class="line">TABLE ENTRIES</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x0</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: EXACT     00000000</span><br><span class="line">Action entry: fib_hit_nexthop - 06</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x1</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: EXACT     0a000164</span><br><span class="line">Action entry: fib_hit_nexthop - 03</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x2</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: EXACT     0a000264</span><br><span class="line">Action entry: fib_hit_nexthop - 03</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x3</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: EXACT     0a010b01</span><br><span class="line">Action entry: fib_hit_nexthop - 03</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x4</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: EXACT     0a010c01</span><br><span class="line">Action entry: fib_hit_nexthop - 03</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x1000005</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: EXACT     0a000202</span><br><span class="line">Action entry: fib_hit_nexthop - 07</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x3000006</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: EXACT     0a010c02</span><br><span class="line">Action entry: fib_hit_nexthop - 08</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x7</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: EXACT     0a000101</span><br><span class="line">Action entry: fib_hit_nexthop - 09</span><br><span class="line">==========</span><br><span class="line">Dumping default entry</span><br><span class="line">Action entry: on_miss - </span><br><span class="line">==========</span><br><span class="line">RuntimeCmd: table_dump ipv4_fib_lpm</span><br><span class="line">==========</span><br><span class="line">TABLE ENTRIES</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x0</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: LPM       7f000000/8</span><br><span class="line">Action entry: fib_hit_nexthop - 05</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x1</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: LPM       00000000/0</span><br><span class="line">Action entry: fib_hit_nexthop - 06</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x2</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: LPM       0a000164/24</span><br><span class="line">Action entry: fib_hit_nexthop - 03</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x3</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: LPM       0a000264/24</span><br><span class="line">Action entry: fib_hit_nexthop - 03</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x4</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: LPM       0a010b01/24</span><br><span class="line">Action entry: fib_hit_nexthop - 03</span><br><span class="line">**********</span><br><span class="line">Dumping entry 0x5</span><br><span class="line">Match key:</span><br><span class="line">* l3_metadata.vrf          : EXACT     0001</span><br><span class="line">* ipv4_metadata.lkp_ipv4_da: LPM       0a010c01/24</span><br><span class="line">Action entry: fib_hit_nexthop - 03</span><br><span class="line">==========</span><br><span class="line">Dumping default entry</span><br><span class="line">Action entry: on_miss - </span><br><span class="line">==========</span><br><span class="line">RuntimeCmd: </span><br><span class="line">root@leaf1:/#</span><br></pre></td></tr></table></figure>
<h3 id="解决-mininet-起来后-host-间无法互-Ping"><a href="#解决-mininet-起来后-host-间无法互-Ping" class="headerlink" title="解决 mininet 起来后 host 间无法互 Ping"></a>解决 mininet 起来后 host 间无法互 Ping</h3><p>原因：docker 的物理端口配置问题，实际拓扑使用 leaf1-eth1，但是配置却配到 swp1。</p>
<p>详见 <a href="https://github.com/p4lang/p4factory/issues/194" target="_blank" rel="noopener">p4factory issue 194</a></p>
<p>patch 如下：</p>
<figure class="highlight patch"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/mininet/configs/leaf1/l3_int_ref_topo/startup_config.sh b/mininet/configs/leaf1/l3_int_ref_topo/startup_config.sh</span><br><span class="line">index 6432a4c..5d34e05 100755</span><br><span class="line"><span class="comment">--- a/mininet/configs/leaf1/l3_int_ref_topo/startup_config.sh</span></span><br><span class="line"><span class="comment">+++ b/mininet/configs/leaf1/l3_int_ref_topo/startup_config.sh</span></span><br><span class="line"><span class="meta">@@ -2,15 +2,15 @@</span></span><br><span class="line"> </span><br><span class="line"> stty -echo; set +m</span><br><span class="line"> </span><br><span class="line"><span class="deletion">-ip link set dev swp1 address 00:01:00:00:00:01</span></span><br><span class="line"><span class="deletion">-ip link set dev swp2 address 00:01:00:00:00:02</span></span><br><span class="line"><span class="deletion">-ip link set dev swp3 address 00:01:00:00:00:03</span></span><br><span class="line"><span class="deletion">-ip link set dev swp4 address 00:01:00:00:00:04</span></span><br><span class="line"><span class="addition">+ip link set dev leaf1-eth1 address 00:01:00:00:00:01</span></span><br><span class="line"><span class="addition">+ip link set dev leaf1-eth2 address 00:01:00:00:00:02</span></span><br><span class="line"><span class="addition">+ip link set dev leaf1-eth3 address 00:01:00:00:00:03</span></span><br><span class="line"><span class="addition">+ip link set dev leaf1-eth4 address 00:01:00:00:00:04</span></span><br><span class="line"> </span><br><span class="line"><span class="deletion">-ip address add 10.0.1.100/24 broadcast + dev swp1</span></span><br><span class="line"><span class="deletion">-ip address add 10.0.2.100/24 broadcast + dev swp2</span></span><br><span class="line"><span class="deletion">-ip address add 10.1.11.1/24 broadcast + dev swp3</span></span><br><span class="line"><span class="deletion">-ip address add 10.1.12.1/24 broadcast + dev swp4</span></span><br><span class="line"><span class="addition">+ip address add 10.0.1.100/24 broadcast + dev leaf1-eth1</span></span><br><span class="line"><span class="addition">+ip address add 10.0.2.100/24 broadcast + dev leaf1-eth2</span></span><br><span class="line"><span class="addition">+ip address add 10.1.11.1/24 broadcast + dev leaf1-eth3</span></span><br><span class="line"><span class="addition">+ip address add 10.1.12.1/24 broadcast + dev leaf1-eth4</span></span><br><span class="line"> </span><br><span class="line"> cp /configs/quagga/* /etc/quagga/</span><br><span class="line"> chown quagga.quagga /etc/quagga/*</span><br><span class="line">diff --git a/mininet/configs/leaf2/l3_int_ref_topo/startup_config.sh b/mininet/configs/leaf2/l3_int_ref_topo/startup_config.sh</span><br><span class="line">index 0a5637f..7562c72 100755</span><br><span class="line"><span class="comment">--- a/mininet/configs/leaf2/l3_int_ref_topo/startup_config.sh</span></span><br><span class="line"><span class="comment">+++ b/mininet/configs/leaf2/l3_int_ref_topo/startup_config.sh</span></span><br><span class="line"><span class="meta">@@ -2,15 +2,15 @@</span></span><br><span class="line"> </span><br><span class="line"> stty -echo; set +m</span><br><span class="line"> </span><br><span class="line"><span class="deletion">-ip link set dev swp1 address 00:02:00:00:00:01</span></span><br><span class="line"><span class="deletion">-ip link set dev swp2 address 00:02:00:00:00:02</span></span><br><span class="line"><span class="deletion">-ip link set dev swp3 address 00:02:00:00:00:03</span></span><br><span class="line"><span class="deletion">-ip link set dev swp4 address 00:02:00:00:00:04</span></span><br><span class="line"><span class="addition">+ip link set dev leaf2-eth1 address 00:02:00:00:00:01</span></span><br><span class="line"><span class="addition">+ip link set dev leaf2-eth2 address 00:02:00:00:00:02</span></span><br><span class="line"><span class="addition">+ip link set dev leaf2-eth3 address 00:02:00:00:00:03</span></span><br><span class="line"><span class="addition">+ip link set dev leaf2-eth4 address 00:02:00:00:00:04</span></span><br><span class="line"> </span><br><span class="line"><span class="deletion">-ip address add 10.0.3.100/24 broadcast + dev swp1</span></span><br><span class="line"><span class="deletion">-ip address add 10.0.4.100/24 broadcast + dev swp2</span></span><br><span class="line"><span class="deletion">-ip address add 10.1.21.1/24 broadcast + dev swp3</span></span><br><span class="line"><span class="deletion">-ip address add 10.1.22.1/24 broadcast + dev swp4</span></span><br><span class="line"><span class="addition">+ip address add 10.0.3.100/24 broadcast + dev leaf2-eth1</span></span><br><span class="line"><span class="addition">+ip address add 10.0.4.100/24 broadcast + dev leaf2-eth2</span></span><br><span class="line"><span class="addition">+ip address add 10.1.21.1/24 broadcast + dev leaf2-eth3</span></span><br><span class="line"><span class="addition">+ip address add 10.1.22.1/24 broadcast + dev leaf2-eth4</span></span><br><span class="line"> </span><br><span class="line"> cp /configs/quagga/* /etc/quagga/</span><br><span class="line"> chown quagga.quagga /etc/quagga/*</span><br><span class="line">diff --git a/mininet/configs/spine1/l3_int_ref_topo/startup_config.sh b/mininet/configs/spine1/l3_int_ref_topo/startup_config.sh</span><br><span class="line">index f2ecfc0..33f4878 100755</span><br><span class="line"><span class="comment">--- a/mininet/configs/spine1/l3_int_ref_topo/startup_config.sh</span></span><br><span class="line"><span class="comment">+++ b/mininet/configs/spine1/l3_int_ref_topo/startup_config.sh</span></span><br><span class="line"><span class="meta">@@ -2,11 +2,11 @@</span></span><br><span class="line"> </span><br><span class="line"> stty -echo; set +m</span><br><span class="line"> </span><br><span class="line"><span class="deletion">-ip link set dev swp1 address 00:03:00:00:00:01</span></span><br><span class="line"><span class="deletion">-ip link set dev swp2 address 00:03:00:00:00:02</span></span><br><span class="line"><span class="addition">+ip link set dev spine1-eth1 address 00:03:00:00:00:01</span></span><br><span class="line"><span class="addition">+ip link set dev spine1-eth2 address 00:03:00:00:00:02</span></span><br><span class="line"> </span><br><span class="line"><span class="deletion">-ip address add 10.1.11.2/24 broadcast + dev swp1</span></span><br><span class="line"><span class="deletion">-ip address add 10.1.21.2/24 broadcast + dev swp2</span></span><br><span class="line"><span class="addition">+ip address add 10.1.11.2/24 broadcast + dev spine1-eth1</span></span><br><span class="line"><span class="addition">+ip address add 10.1.21.2/24 broadcast + dev spine2-eth2</span></span><br><span class="line"> </span><br><span class="line"> cp /configs/quagga/* /etc/quagga/</span><br><span class="line"> chown quagga.quagga /etc/quagga/*</span><br><span class="line">diff --git a/mininet/configs/spine2/l3_int_ref_topo/startup_config.sh b/mininet/configs/spine2/l3_int_ref_topo/startup_config.sh</span><br><span class="line">index 7a28663..be95656 100755</span><br><span class="line"><span class="comment">--- a/mininet/configs/spine2/l3_int_ref_topo/startup_config.sh</span></span><br><span class="line"><span class="comment">+++ b/mininet/configs/spine2/l3_int_ref_topo/startup_config.sh</span></span><br><span class="line"><span class="meta">@@ -2,11 +2,11 @@</span></span><br><span class="line"> </span><br><span class="line"> stty -echo; set +m</span><br><span class="line"> </span><br><span class="line"><span class="deletion">-ip link set dev swp1 address 00:04:00:00:00:01</span></span><br><span class="line"><span class="deletion">-ip link set dev swp2 address 00:04:00:00:00:02</span></span><br><span class="line"><span class="addition">+ip link set dev spine2-eth1 address 00:04:00:00:00:01</span></span><br><span class="line"><span class="addition">+ip link set dev spine2-eth2 address 00:04:00:00:00:02</span></span><br><span class="line"> </span><br><span class="line"><span class="deletion">-ip address add 10.1.12.2/24 broadcast + dev swp1</span></span><br><span class="line"><span class="deletion">-ip address add 10.1.22.2/24 broadcast + dev swp2</span></span><br><span class="line"><span class="addition">+ip address add 10.1.12.2/24 broadcast + dev spine2-eth1</span></span><br><span class="line"><span class="addition">+ip address add 10.1.22.2/24 broadcast + dev spine2-eth2</span></span><br><span class="line"> </span><br><span class="line"> cp /configs/quagga/* /etc/quagga/</span><br><span class="line"> chown quagga.quagga /etc/quagga/*</span><br></pre></td></tr></table></figure>
<h3 id="iperf-提示拒绝连接"><a href="#iperf-提示拒绝连接" class="headerlink" title="iperf 提示拒绝连接"></a>iperf 提示拒绝连接</h3><p>非必需，仅出现过一次，默认每个 host 的 iperf server 都会启动。<br>h3 iperf 似乎默认没有启动。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> root  ~  workshop  p4factory  mininet  iperf -c 10.2.1.3 -t 60</span><br><span class="line">connect failed: Connection refused</span><br></pre></td></tr></table></figure>
<p>在 h3 中启动：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> root  ~  workshop  p4factory  mininet  iperf -s</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">Server listening on TCP port 5001</span><br><span class="line">TCP window size: 85.3 KByte (default)</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">[ 18] local 10.2.1.3 port 5001 connected with 10.2.1.1 port 45594</span><br></pre></td></tr></table></figure>
<p>在 h1 中 运行 iperf 客户端：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> root  ~  workshop  p4factory  mininet  iperf -c 10.2.1.3 -t 6000000</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">Client connecting to 10.2.1.3, TCP port 5001</span><br><span class="line">TCP window size: 85.3 KByte (default)</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">[ 17] local 10.2.1.1 port 45594 connected with 10.2.1.3 port 5001</span><br><span class="line">^C[ ID] Interval       Transfer     Bandwidth</span><br><span class="line">[ 17]  0.0-639.1 sec   341 MBytes  4.47 Mbits/sec</span><br></pre></td></tr></table></figure>
<h3 id="monitor-网页无法显示正在运行的流"><a href="#monitor-网页无法显示正在运行的流" class="headerlink" title="monitor 网页无法显示正在运行的流"></a>monitor 网页无法显示正在运行的流</h3><p>目前在 h1 iperf h3 的时候，可以通过在 leaf1 中 <code>tshark -i leaf1-eth1</code> 确认输入报文，<code>tshark -i leaf1-eth4</code> 确认输出报文。<br>可看到报文是 vxlan-gpe 封装（UDP port 4790），但是目前 monitor client 网页上还无法看到 INT 汇总会的图表以及正在运行的流。</p>
<ul>
<li>问题原因：bridge 过滤掉 UDP 报文，具体为哪条过滤表项目前还未细究。</li>
</ul>
<blockquote>
<p>Okay. The solution to this lies in the quirks of how linux bridges get filtered. Essentially, you need to go in disable all the filters so that the UDP packets can get through. Details here: <a href="https://wiki.linuxfoundation.org/networking/bridge" target="_blank" rel="noopener">https://wiki.linuxfoundation.org/networking/bridge</a></p>
</blockquote>
<ul>
<li>解决方法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># cd /proc/sys/net/bridge</span><br><span class="line"># for f in bridge-nf-*; do echo 0 &gt; $f; done</span><br></pre></td></tr></table></figure>
<p>详见 p4-dev 邮件列表，<a href="http://lists.p4.org/pipermail/p4-dev_lists.p4.org/2017-May/001061.html" target="_blank" rel="noopener">INT demo issue - Bad UDP checksum for packets headed    to monitor</a>。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/04/18/networks/p4/demo_int/" data-id="cjz95gt6900mxw5r9a751ulgz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/int/">int</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/p4/">p4</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/04/18/linux/docker_failed_after_update_kernel/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Linux升级内核后 docker 不可用
        
      </div>
    </a>
  
  
    <a href="/2017/04/18/linux/startup_with_old_kernel/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">ubuntu 用回旧版内核</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/administrator/">administrator</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/c/">c</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/dokuwiki/">dokuwiki</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/">kernel</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/life/">life</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/misc/">misc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/networks/">networks</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/newTech/">newTech</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/p4/">p4</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/programmer/">programmer</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools-administrator/">tools, administrator</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/">windows</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/yocto/">yocto</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/思考/">思考</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARP/">ARP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CPU/">CPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Excel/">Excel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GDB/">GDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/L2/">L2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MTU/">MTU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NOS/">NOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SecureCRT/">SecureCRT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/administrator/">administrator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/app/">app</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apt/">apt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arm/">arm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arp/">arp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cable/">cable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/clock/">clock</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compile/">compile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/configure/">configure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coredump/">coredump</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dataplane/">dataplane</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deb/">deb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debian/">debian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discourse/">discourse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dokuwiki/">dokuwiki</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dos/">dos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elementary/">elementary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fcitx/">fcitx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gcc/">gcc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gnome-terminal/">gnome-terminal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grub/">grub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/int/">int</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kconfig/">kconfig</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kernel/">kernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lib/">lib</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/libteam/">libteam</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/makefile/">makefile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mirror/">mirror</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/misc/">misc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/moinmoin/">moinmoin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nat/">nat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/networks/">networks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openswitch/">openswitch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/p4/">p4</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/packet/">packet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paper/">paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/perf/">perf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/">pip</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ppp/">ppp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pppoe-networks/">pppoe networks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/profiling/">profiling</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/programmer/">programmer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/quagga/">quagga</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redhat/">redhat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpc/">rpc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpm/">rpm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scp/">scp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/serialport/">serialport</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/server/">server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/software/">software</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sshd/">sshd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/telnet/">telnet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/terminal/">terminal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/time/">time</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tuntap/">tuntap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vagrant/">vagrant</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/veth/">veth</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/virtualBox/">virtualBox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vlc/">vlc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vnc/">vnc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wiki/">wiki</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wine/">wine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wireshark/">wireshark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wps/">wps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xterm/">xterm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yocto/">yocto</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/串口/">串口</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/交叉编译/">交叉编译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/交换机/">交换机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内存管理/">内存管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/外面的世界/">外面的世界</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字符流操作/">字符流操作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/思考/">思考</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件共享/">文件共享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件系统/">文件系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/新技术点/">新技术点</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/版本控制/">版本控制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/磁盘管理/">磁盘管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络测试/">网络测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/虚拟机/">虚拟机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调试/">调试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/路由协议/">路由协议</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/进程/">进程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/远程登录/">远程登录</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ARP/" style="font-size: 10px;">ARP</a> <a href="/tags/CPU/" style="font-size: 10px;">CPU</a> <a href="/tags/Excel/" style="font-size: 10px;">Excel</a> <a href="/tags/GDB/" style="font-size: 10px;">GDB</a> <a href="/tags/L2/" style="font-size: 10px;">L2</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/MTU/" style="font-size: 10px;">MTU</a> <a href="/tags/NOS/" style="font-size: 10px;">NOS</a> <a href="/tags/SecureCRT/" style="font-size: 11.82px;">SecureCRT</a> <a href="/tags/administrator/" style="font-size: 17.27px;">administrator</a> <a href="/tags/app/" style="font-size: 10px;">app</a> <a href="/tags/apt/" style="font-size: 10.91px;">apt</a> <a href="/tags/arm/" style="font-size: 10px;">arm</a> <a href="/tags/arp/" style="font-size: 10px;">arp</a> <a href="/tags/c/" style="font-size: 16.36px;">c</a> <a href="/tags/cable/" style="font-size: 10px;">cable</a> <a href="/tags/centos/" style="font-size: 10px;">centos</a> <a href="/tags/clock/" style="font-size: 10px;">clock</a> <a href="/tags/compile/" style="font-size: 10.91px;">compile</a> <a href="/tags/configure/" style="font-size: 10px;">configure</a> <a href="/tags/coredump/" style="font-size: 10px;">coredump</a> <a href="/tags/dataplane/" style="font-size: 10px;">dataplane</a> <a href="/tags/deb/" style="font-size: 13.64px;">deb</a> <a href="/tags/debian/" style="font-size: 10.91px;">debian</a> <a href="/tags/discourse/" style="font-size: 10px;">discourse</a> <a href="/tags/docker/" style="font-size: 10.91px;">docker</a> <a href="/tags/dokuwiki/" style="font-size: 12.73px;">dokuwiki</a> <a href="/tags/dos/" style="font-size: 10px;">dos</a> <a href="/tags/elementary/" style="font-size: 10px;">elementary</a> <a href="/tags/fcitx/" style="font-size: 10px;">fcitx</a> <a href="/tags/gcc/" style="font-size: 10px;">gcc</a> <a href="/tags/git/" style="font-size: 15.45px;">git</a> <a href="/tags/gnome-terminal/" style="font-size: 10px;">gnome-terminal</a> <a href="/tags/grub/" style="font-size: 10px;">grub</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/int/" style="font-size: 10.91px;">int</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/kconfig/" style="font-size: 10px;">kconfig</a> <a href="/tags/kernel/" style="font-size: 11.82px;">kernel</a> <a href="/tags/lib/" style="font-size: 10px;">lib</a> <a href="/tags/libteam/" style="font-size: 10px;">libteam</a> <a href="/tags/linux/" style="font-size: 13.64px;">linux</a> <a href="/tags/makefile/" style="font-size: 10px;">makefile</a> <a href="/tags/mirror/" style="font-size: 10px;">mirror</a> <a href="/tags/misc/" style="font-size: 11.82px;">misc</a> <a href="/tags/moinmoin/" style="font-size: 10px;">moinmoin</a> <a href="/tags/nat/" style="font-size: 10px;">nat</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/networks/" style="font-size: 14.55px;">networks</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/openswitch/" style="font-size: 10.91px;">openswitch</a> <a href="/tags/p4/" style="font-size: 14.55px;">p4</a> <a href="/tags/packet/" style="font-size: 10.91px;">packet</a> <a href="/tags/paper/" style="font-size: 10px;">paper</a> <a href="/tags/perf/" style="font-size: 10px;">perf</a> <a href="/tags/pip/" style="font-size: 10px;">pip</a> <a href="/tags/ppp/" style="font-size: 10px;">ppp</a> <a href="/tags/pppoe-networks/" style="font-size: 10px;">pppoe networks</a> <a href="/tags/profiling/" style="font-size: 10px;">profiling</a> <a href="/tags/programmer/" style="font-size: 10px;">programmer</a> <a href="/tags/python/" style="font-size: 13.64px;">python</a> <a href="/tags/quagga/" style="font-size: 10px;">quagga</a> <a href="/tags/redhat/" style="font-size: 10px;">redhat</a> <a href="/tags/redis/" style="font-size: 10.91px;">redis</a> <a href="/tags/rpc/" style="font-size: 10px;">rpc</a> <a href="/tags/rpm/" style="font-size: 10px;">rpm</a> <a href="/tags/scp/" style="font-size: 10px;">scp</a> <a href="/tags/serialport/" style="font-size: 10.91px;">serialport</a> <a href="/tags/server/" style="font-size: 10px;">server</a> <a href="/tags/software/" style="font-size: 10px;">software</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/sshd/" style="font-size: 10px;">sshd</a> <a href="/tags/svn/" style="font-size: 10.91px;">svn</a> <a href="/tags/telnet/" style="font-size: 10px;">telnet</a> <a href="/tags/terminal/" style="font-size: 10px;">terminal</a> <a href="/tags/time/" style="font-size: 10px;">time</a> <a href="/tags/tuntap/" style="font-size: 10px;">tuntap</a> <a href="/tags/ubuntu/" style="font-size: 19.09px;">ubuntu</a> <a href="/tags/vagrant/" style="font-size: 10px;">vagrant</a> <a href="/tags/veth/" style="font-size: 10px;">veth</a> <a href="/tags/vim/" style="font-size: 11.82px;">vim</a> <a href="/tags/virtualBox/" style="font-size: 10px;">virtualBox</a> <a href="/tags/vlc/" style="font-size: 10px;">vlc</a> <a href="/tags/vnc/" style="font-size: 10px;">vnc</a> <a href="/tags/wiki/" style="font-size: 10px;">wiki</a> <a href="/tags/windows/" style="font-size: 12.73px;">windows</a> <a href="/tags/wine/" style="font-size: 10px;">wine</a> <a href="/tags/wireshark/" style="font-size: 10px;">wireshark</a> <a href="/tags/wps/" style="font-size: 10px;">wps</a> <a href="/tags/xterm/" style="font-size: 10px;">xterm</a> <a href="/tags/yocto/" style="font-size: 10.91px;">yocto</a> <a href="/tags/串口/" style="font-size: 10.91px;">串口</a> <a href="/tags/交叉编译/" style="font-size: 10px;">交叉编译</a> <a href="/tags/交换机/" style="font-size: 10px;">交换机</a> <a href="/tags/内存管理/" style="font-size: 10px;">内存管理</a> <a href="/tags/外面的世界/" style="font-size: 10px;">外面的世界</a> <a href="/tags/字符流操作/" style="font-size: 10.91px;">字符流操作</a> <a href="/tags/思考/" style="font-size: 10.91px;">思考</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/文件共享/" style="font-size: 10px;">文件共享</a> <a href="/tags/文件系统/" style="font-size: 18.18px;">文件系统</a> <a href="/tags/新技术点/" style="font-size: 10px;">新技术点</a> <a href="/tags/版本控制/" style="font-size: 15.45px;">版本控制</a> <a href="/tags/磁盘管理/" style="font-size: 10px;">磁盘管理</a> <a href="/tags/网络测试/" style="font-size: 12.73px;">网络测试</a> <a href="/tags/虚拟机/" style="font-size: 10px;">虚拟机</a> <a href="/tags/调试/" style="font-size: 10px;">调试</a> <a href="/tags/路由协议/" style="font-size: 10px;">路由协议</a> <a href="/tags/进程/" style="font-size: 10px;">进程</a> <a href="/tags/远程登录/" style="font-size: 12.73px;">远程登录</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/07/23/misc/screen_too_bright/">屏幕太“亮”看不清灰色部分</a>
          </li>
        
          <li>
            <a href="/2019/03/25/linux/elementaryos/">elementary OS 使用记录</a>
          </li>
        
          <li>
            <a href="/2019/01/31/tools/git_cmd/">一些常见的 git 命令备忘</a>
          </li>
        
          <li>
            <a href="/2019/01/24/networks/rpc.rpc_poll.rpc_streaming/">图解 rpc rpc_poll 和 rpc_streaming 的差异</a>
          </li>
        
          <li>
            <a href="/2018/11/01/programmer/tools/kconfig-frontends/">kconfig-frontends 简介</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>